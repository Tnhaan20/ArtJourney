import{af as D,c as E,r as c,p as H,j as e,x as U,W as M,h as N,F as G,L as b,G as q,B as _,f as z,T as K,S as d}from"./index-CmNW3CzC.js";function O(){var f,v;const[w]=D(),m=E(),i=w.get("q")||"",[l,p]=c.useState(1),[g]=c.useState(12),[y,C]=c.useState("relevance"),[x,S]=c.useState("all"),{useSearchCourses:k}=H(),{data:n,isLoading:F,error:P}=k(i,l,g);c.useEffect(()=>{p(1)},[i]);const R=((f=n==null?void 0:n.data)==null?void 0:f.items)||[],o=((v=n==null?void 0:n.data)==null?void 0:v.totalCount)||0,u=Math.ceil(o/g),j=[...R.filter(s=>x==="all"?!0:(s.level===0?"beginner":s.level===1?"intermediate":"advanced")===x)].sort((s,t)=>{switch(y){case"title":return s.title.localeCompare(t.title);case"newest":return new Date(t.createdDate)-new Date(s.createdDate);case"level":return s.level-t.level;case"rating":return(t.averageRating||0)-(s.averageRating||0);default:return 0}}),h=s=>{p(s),window.scrollTo(0,0)},L=s=>{switch(s){case 0:return"Beginner";case 1:return"Intermediate";case 2:return"Advanced";default:return"Unknown"}},B=s=>s?"Premium":"Free",I=({rating:s,totalFeedbacks:t})=>{const r=[],T=Math.floor(s),A=s%1!==0;for(let a=0;a<T;a++)r.push(e.jsx(d,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"},a));A&&r.push(e.jsxs("div",{className:"relative",children:[e.jsx(d,{className:"w-4 h-4 text-gray-300"}),e.jsx("div",{className:"absolute inset-0 overflow-hidden w-1/2",children:e.jsx(d,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"})})]},"half"));const $=5-Math.ceil(s);for(let a=0;a<$;a++)r.push(e.jsx(d,{className:"w-4 h-4 text-gray-300"},`empty-${a}`));return e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"flex items-center space-x-0.5",children:r}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:s>0?s.toFixed(1):"0.0"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",t," review",t!==1?"s":"",")"]})]})};return F?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(U,{className:"w-6 h-6 animate-spin text-primary-yellow"}),e.jsx("span",{className:"text-lg",children:"Searching courses..."})]})})}):P?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg text-red-600 mb-4",children:"Error searching courses"}),e.jsx("button",{onClick:()=>m("/learn"),className:"px-4 py-2 bg-primary-yellow text-white rounded-lg hover:bg-yellow-600",children:"Back to Courses"})]})})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("button",{onClick:()=>m("/learn"),className:"flex items-center text-primary-yellow hover:text-yellow-600 mb-4",children:[e.jsx(M,{className:"w-5 h-5 mr-2"}),"Back to Courses"]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Search Results"}),e.jsx("p",{className:"text-gray-600",children:o>0?e.jsxs(e.Fragment,{children:["Found ",e.jsx("span",{className:"font-semibold",children:o}),' courses for "',e.jsx("span",{className:"font-semibold text-primary-yellow",children:i}),'"']}):e.jsxs(e.Fragment,{children:['No courses found for "',e.jsx("span",{className:"font-semibold text-primary-yellow",children:i}),'"']})})]}),e.jsxs("div",{className:"relative w-80",children:[e.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",defaultValue:i,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-yellow focus:border-primary-yellow",placeholder:"Search courses...",onKeyPress:s=>{s.key==="Enter"&&m(`/learn/search?q=${encodeURIComponent(s.target.value)}`)}})]})]})]}),o>0&&e.jsxs("div",{className:"flex items-center justify-between mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filters:"})]}),e.jsxs("select",{value:x,onChange:s=>S(s.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-primary-yellow focus:border-primary-yellow",children:[e.jsx("option",{value:"all",children:"All Levels"}),e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Sort by:"}),e.jsxs("select",{value:y,onChange:s=>C(s.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-primary-yellow focus:border-primary-yellow",children:[e.jsx("option",{value:"relevance",children:"Relevance"}),e.jsx("option",{value:"title",children:"Title A-Z"}),e.jsx("option",{value:"newest",children:"Newest First"}),e.jsx("option",{value:"level",children:"Difficulty Level"}),e.jsx("option",{value:"rating",children:"Highest Rated"})]})]})]}),j.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8",children:j.map(s=>e.jsx(b,{to:`/learn/course/${s.courseId}`,className:"group block",children:e.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-md transition-all duration-300 transform group-hover:scale-105 group-hover:shadow-lg",children:[e.jsx("div",{className:"h-48 overflow-hidden",children:e.jsx("img",{src:s.thumbnailUrl||s.coverImageUrl||q.courses.africa,alt:s.title,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",onError:t=>{t.target.src=`https://via.placeholder.com/300x200?text=${encodeURIComponent(s.title)}`}})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s.level===0?"bg-green-100 text-green-800":s.level===1?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:L(s.level)}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s.isPremium?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:B(s.isPremium)})]}),e.jsx("h3",{className:"font-semibold text-lg mb-2 line-clamp-2 group-hover:text-primary-yellow transition-colors",children:s.title}),s.description&&e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:s.description}),e.jsx("div",{className:"mb-3",children:e.jsx(I,{rating:s.averageRating||0,totalFeedbacks:s.totalFeedbacks||0})}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"Course"})]}),s.estimatedDuration&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:s.estimatedDuration})]})]})]})]})},s.courseId))}),u>1&&e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("button",{onClick:()=>h(l-1),disabled:l===1,className:"px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),[...Array(u)].map((s,t)=>{const r=t+1;return e.jsx("button",{onClick:()=>h(r),className:`px-3 py-2 border rounded-md text-sm font-medium ${l===r?"bg-primary-yellow text-white border-primary-yellow":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:r},r)}),e.jsx("button",{onClick:()=>h(l+1),disabled:l===u,className:"px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}):e.jsxs("div",{className:"text-center py-16",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(N,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No courses found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Try adjusting your search terms or filters"})]}),e.jsxs("div",{className:"max-w-sm mx-auto text-left space-y-2 text-sm text-gray-500",children:[e.jsx("p",{className:"font-medium",children:"Suggestions:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-2",children:[e.jsx("li",{children:"Check your spelling"}),e.jsx("li",{children:"Try more general terms"}),e.jsx("li",{children:"Remove filters to see more results"}),e.jsx("li",{children:"Browse all courses instead"})]})]}),e.jsx(b,{to:"/learn",className:`inline-block mt-6 px-6 py-3 cursor-pointer ${K.HIGHLIGHT_FRAME} transition-colors`,children:"Browse All Courses"})]})]})}function W(){return e.jsx("div",{className:"w-full min-h-screen",children:e.jsx(O,{})})}export{W as default};
