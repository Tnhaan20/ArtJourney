import{af as w,c as V,a as E,r as d,j as e,E as C,a7 as k,a8 as L,aa as R,v as p,C as A,D as P,ae as S,P as g,ag as T,L as F}from"./index-CdDrPE2n.js";import{u as j}from"./use-auth-BoLNJicI.js";import{m as l,R as D}from"./proxy-D9x0D6YH.js";const M=()=>{const[b]=w(),N=V(),n=b.get("v"),{t:s}=E(),[a,i]=d.useState("loading"),[x,c]=d.useState(""),m=j().useSendVerifyEmail(),{data:t,isLoading:f,isError:y,error:o,refetch:_}=j().useVerifyEmail(n,{enabled:!!n,retry:!1,refetchOnWindowFocus:!1});d.useEffect(()=>{var r,h,u;if(!n){i("error"),c(s("emailVerify.error.invalidToken"));return}if(f){i("loading");return}if(y){i("error"),c(((h=(r=o==null?void 0:o.response)==null?void 0:r.data)==null?void 0:h.message)||s("emailVerify.error.generalError"));return}t&&(t.code===200?(i("success"),c(t.message||s("emailVerify.success.message"))):(i("error"),c(((u=t.error)==null?void 0:u.message)||s("emailVerify.error.expiredToken"))))},[n,f,y,t,o,s]);const v=()=>{m.mutate(void 0,{onSuccess:r=>{console.log("Resend email success:",r)},onError:r=>{console.error("Resend email error:",r)}})};return e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-primary-white to-secondary-yellow px-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("img",{src:C.main_logo.artjourney_logo,alt:"ArtJourney Logo",className:"h-12"})})}),e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsxs(k,{className:"border-none shadow-lg overflow-hidden",children:[e.jsx("div",{className:"h-2 bg-gradient-to-r from-primary-yellow via-secondary-yellow to-third-yellow"}),e.jsx(L,{className:"bg-white pt-6 pb-4",children:e.jsx("h1",{className:"text-2xl font-bold text-center text-gray-800",children:s("emailVerify.title")})}),e.jsxs(R,{className:"bg-white px-6 pt-4 pb-6",children:[a==="loading"&&e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(p,{className:"h-12 w-12 animate-spin text-amber-500"})}),e.jsx("p",{className:"text-gray-600",children:s("emailVerify.verifying")})]}),a==="success"&&e.jsxs(l.div,{className:"text-center py-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs("div",{className:"relative mx-auto w-24 h-24 mb-6",children:[e.jsx("div",{className:"absolute inset-0 rounded-full bg-green-100 animate-pulse"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(A,{className:"h-12 w-12 text-green-600"})})]}),e.jsx("h2",{className:"text-xl font-bold text-green-600 mb-2",children:s("emailVerify.success.title")}),e.jsx("p",{className:"text-gray-600 mb-6",children:x}),e.jsx("p",{className:"text-gray-500 text-sm",children:s("emailVerify.success.fullAccess")})]}),a==="error"&&e.jsxs(l.div,{className:"text-center py-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs("div",{className:"relative mx-auto w-24 h-24 mb-6",children:[e.jsx("div",{className:"absolute inset-0 rounded-full bg-red-100 animate-pulse"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(P,{className:"h-12 w-12 text-red-600"})})]}),e.jsx("h2",{className:"text-xl font-bold text-red-600 mb-2",children:s("emailVerify.error.title")}),e.jsx("p",{className:"text-gray-600 mb-4",children:x})]})]}),e.jsxs(S,{className:"bg-gray-50 px-6 py-4 flex flex-col gap-3",children:[e.jsx(g,{onClick:()=>N("/profile"),className:"w-full bg-primary-yellow hover:bg-amber-600 transition-all duration-300",disabled:a==="loading",children:a==="success"?e.jsxs("span",{className:"flex items-center",children:[s("emailVerify.buttons.goToProfile")," ",e.jsx(T,{className:"ml-2 h-4 w-4"})]}):s("emailVerify.buttons.backToProfile")}),a==="error"&&e.jsx(g,{variant:"outline",onClick:v,disabled:m.isLoading,className:"w-full border-amber-500 text-amber-600 hover:bg-amber-50",children:m.isLoading?e.jsxs("span",{className:"flex items-center",children:[e.jsx(p,{className:"mr-2 h-4 w-4 animate-spin"}),s("emailVerify.buttons.sending")]}):e.jsxs("span",{className:"flex items-center",children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),s("emailVerify.buttons.resendEmail")]})})]})]})}),e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.3},className:"text-center mt-8 text-sm text-primary-black",children:e.jsxs("p",{children:[s("emailVerify.help.problem")," ",e.jsx(F,{to:"/help",className:"text-gray-500 hover:underline",children:s("emailVerify.help.supportCenter")})]})})]})})};function O(){return e.jsx(e.Fragment,{children:e.jsx(M,{})})}export{O as default};
