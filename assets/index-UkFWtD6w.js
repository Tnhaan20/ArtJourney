import{c as C,r as ae,l as Q,k as U,D as le,m as ne,E as oe,j as e,A as O,G as m,B as u,H as E,e as ie,S as de,T as I,C as ce,y as me,I as xe,J as he,V as ge,K as ue}from"./index-CkJIRumn.js";import{C as be}from"./Completed-BvEaJFO8.js";import{A as G}from"./award-AKYpLADn.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],je=C("mouse-pointer",pe);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M5 3v16h16",key:"1mqmf9"}],["path",{d:"m5 19 6-6",key:"jh6hbb"}],["path",{d:"m2 6 3-3 3 3",key:"tkyvxa"}],["path",{d:"m18 16 3 3-3 3",key:"1d4glt"}]],Ne=C("move-3d",ye);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],q=C("pen-line",fe);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],V=C("type",ve);function we(){var H,B,P,R;const[l,h]=ae.useState(0),c=Q(),{courseId:d,moduleId:b,subModuleId:g}=U(),{getLearningContent:J,getLearningItem:K}=le(),{getCoursesById:W}=ne(),{markAsComplete:Y,isLoading:k}=oe();console.log("URL Params:",{courseId:d,moduleId:b,subModuleId:g});const{data:p,isLoading:X,error:j}=J(g),{data:y,isLoading:Z,error:N}=W(d),n=(p==null?void 0:p.data)||[],D=(H=n[l])==null?void 0:H.learningContentId,{data:f,isLoading:T,error:v}=K(D),ee=async t=>{const r=await Y(t);r.success?console.log("Successfully marked as complete!"):console.error("Failed to mark as complete:",r.error)},_=(t,r)=>{t==="quiz"?c(`/quiz/course/${d}/module/${b}/submodule/${g}/content/${r}`):t==="challenge"&&c(`/challenge/course/${d}/module/${b}/submodule/${g}/content/${r}`)},A=()=>{c(`/learn/course/${d}`)};if(console.log("Learning Content Data:",p),console.log("Course Data:",y),console.log("Learning Item Data:",f),X||Z)return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-yellow-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx(O,{className:"w-20 h-20 text-primary-yellow animate-spin"})}),e.jsx("p",{className:"text-lg font-semibold text-gray-700 mt-6",children:"Loading submodule content..."}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Please wait while we prepare your learning materials"})]})});if(j||N)return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gradient-to-br from-red-50 to-orange-50",children:e.jsxs("div",{className:"text-center p-8 rounded-3xl shadow-2xl bg-white border border-red-100",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-6",children:"😞"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-3",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md",children:(j==null?void 0:j.message)||(N==null?void 0:N.message)||"We're having trouble loading your learning content. Please try again."}),e.jsx(m,{onClick:()=>window.location.reload(),className:"bg-gradient-to-r from-red-500 to-red-600 text-white px-8 py-3 rounded-xl hover:from-red-600 hover:to-red-700 transition-all duration-200 transform hover:scale-105 shadow-lg",children:"Try Again"})]})});const x=y==null?void 0:y.data,i=(B=x==null?void 0:x.moduleCourseDetailScreenResponseDTOs)==null?void 0:B.find(t=>t.moduleId===parseInt(b)),o=(P=i==null?void 0:i.subModuleCourseDetailScreenResponseDTOs)==null?void 0:P.find(t=>t.subModuleId===parseInt(g));if(!n.length)return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50",children:e.jsxs("div",{className:"text-center p-12 rounded-3xl shadow-2xl bg-white",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(u,{size:48,className:"text-blue-600"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"No Learning Content Available"}),e.jsxs("p",{className:"text-gray-600 mb-8 max-w-md",children:['This submodule "',(o==null?void 0:o.subModuleTitle)||"Unknown",`" doesn't have any learning content yet. Check back soon!`]}),e.jsxs(m,{onClick:A,className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-8 py-3 rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all duration-200 transform hover:scale-105 shadow-lg",children:[e.jsx(E,{size:18,className:"mr-2"}),"Back to Course"]})]})});const a=n[l],s=(R=f==null?void 0:f.data)==null?void 0:R[0],L=(t,r=16)=>{switch(t){case 0:return e.jsx(u,{size:r});case 1:return e.jsx(G,{size:r});case 2:return e.jsx(q,{size:r});default:return e.jsx(u,{size:r})}},M=t=>{switch(t){case 0:return"Reading";case 1:return"Challenge";case 2:return"Quiz";default:return"Reading"}},se=(t,r=16)=>{switch(t){case 0:return e.jsx(ue,{size:r});case 1:return e.jsx(ge,{size:r});case 2:return e.jsx(V,{size:r});case 3:return e.jsx(je,{size:r});case 4:return e.jsx(Ne,{size:r});default:return e.jsx(V,{size:r})}},te=t=>{switch(t){case 0:return"Image";case 1:return"Video";case 2:return"Text";case 3:return"Input";case 4:return"Draggable";default:return"Text"}},S=t=>{switch(t){case 0:return"from-green-500 to-green-600";case 1:return"from-purple-500 to-purple-600";case 2:return"from-blue-500 to-blue-600";default:return"from-green-500 to-green-600"}},$=t=>{var F;const r=(F=o==null?void 0:o.learningContentDetailScreenResponseDTOs)==null?void 0:F.find(re=>re.learningContentId===t);return(r==null?void 0:r.userLearningProgressStatus)===2},w=n.filter(t=>$(t.learningContentId)).length,z=n.length>0?w/n.length*100:0;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-yellow-50",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-amber-200 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("nav",{className:"flex py-4","aria-label":"Breadcrumb",children:e.jsxs("ol",{className:"flex items-center space-x-3",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>c("/learn"),className:"text-primary-yellow hover:text-secondary-yellow font-semibold transition-all duration-200 hover:scale-105",children:"Learn"})}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full mx-3"}),e.jsx("button",{onClick:()=>c(`/learn/course/${d}`),className:"text-primary-yellow hover:text-secondary-yellow font-semibold transition-all duration-200 hover:scale-105",children:(x==null?void 0:x.title)||"Course"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full mx-3"}),e.jsx("span",{className:"text-gray-700 font-semibold",children:(i==null?void 0:i.moduleTitle)||"Module"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full mx-3"}),e.jsx("span",{className:"text-gray-600 font-medium",children:(o==null?void 0:o.subModuleTitle)||"Submodule"})]})]})})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row bg-white rounded-3xl shadow-2xl overflow-hidden border border-amber-100",children:[e.jsxs("div",{className:"lg:w-1/3 border-r border-amber-100",children:[e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-50 p-8 border-b border-amber-200",children:[e.jsxs("button",{onClick:A,className:"flex items-center text-primary-yellow hover:text-secondary-yellow mb-6 transition-all duration-200 hover:scale-105 group",children:[e.jsx("div",{className:"p-2 bg-white rounded-xl shadow-md group-hover:shadow-lg transition-all duration-200 mr-3",children:e.jsx(E,{size:18})}),e.jsx("span",{className:"font-semibold",children:"Back to Course"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2 leading-tight",children:(o==null?void 0:o.subModuleTitle)||"Submodule"}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:(i==null?void 0:i.moduleTitle)||"Module"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[e.jsx("div",{className:"p-2 bg-primary-yellow/20 rounded-lg mr-3",children:e.jsx(u,{size:16,className:"text-primary-yellow"})}),e.jsxs("span",{className:"font-medium",children:[n.length," Activities"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Progress"}),e.jsxs("div",{className:"text-sm font-bold text-gray-700",children:[w,"/",n.length]})]})]})]}),e.jsxs("div",{className:"p-6 border-b border-amber-100 bg-gradient-to-r from-green-50 to-emerald-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Overall Progress"}),e.jsxs("span",{className:"text-sm font-bold text-green-600",children:[Math.round(z),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 via-green-500 to-green-600 h-3 rounded-full transition-all duration-500 ease-out relative",style:{width:`${z}%`},children:e.jsx("div",{className:"absolute inset-0 bg-white/20 rounded-full animate-pulse"})})}),e.jsx("div",{className:"mt-2 text-xs text-gray-600",children:w===n.length?"🎉 Congratulations! All activities completed!":`${n.length-w} activities remaining`})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"px-4 py-3 text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Learning Activities"}),e.jsx("nav",{className:"mt-2 space-y-2",children:n.sort((t,r)=>t.displayOrder-r.displayOrder).map((t,r)=>e.jsxs("button",{onClick:()=>h(r),className:`w-full text-left p-4 flex items-center rounded-2xl mx-2 transition-all duration-300 group ${l===r?"bg-gradient-to-r from-primary-yellow to-secondary-yellow text-white shadow-lg transform scale-[1.02]":"text-gray-700 hover:bg-gradient-to-r hover:from-amber-50 hover:to-yellow-50 hover:shadow-md"}`,children:[e.jsx("div",{className:"mr-4",children:e.jsx(be,{isCompleted:$(t.learningContentId),size:20})}),e.jsx("div",{className:`mr-4 p-2 rounded-xl ${l===r?"bg-white/20":"bg-primary-yellow/10 group-hover:bg-primary-yellow/20"} transition-all duration-200`,children:e.jsx("div",{className:l===r?"text-white":"text-primary-yellow",children:L(t.contentType,18)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-sm font-semibold truncate block mb-1",children:t.title}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${l===r?"bg-white/20 text-white":"bg-gray-100 text-gray-600 group-hover:bg-primary-yellow/20 group-hover:text-primary-yellow"} transition-all duration-200`,children:M(t.contentType)})})]}),l===r&&e.jsx("div",{className:"ml-2",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]},t.learningContentId))})]})]}),e.jsx("div",{className:"lg:w-2/3",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-r from-white to-gray-50 p-8 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`mr-6 p-4 bg-gradient-to-r ${S(a.contentType)} rounded-2xl shadow-lg`,children:e.jsx("div",{className:"text-white",children:L(a.contentType,24)})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2 leading-tight",children:a.title}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 space-x-4",children:[e.jsx("span",{className:"bg-gradient-to-r from-gray-100 to-gray-200 px-3 py-1 rounded-full font-medium",children:M(a.contentType)}),(s==null?void 0:s.itemTypes)!==void 0&&e.jsxs("span",{className:"bg-gradient-to-r from-blue-100 to-blue-200 px-3 py-1 rounded-full font-medium flex items-center",children:[e.jsx("div",{className:"mr-1",children:se(s.itemTypes,14)}),te(s.itemTypes)]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ie,{size:16,className:"mr-2 text-gray-500"}),e.jsx("span",{className:"font-medium",children:a.timeLimit||"30:00"})]}),a.likesCount>0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(de,{size:16,className:"mr-2 text-yellow-500"}),e.jsxs("span",{className:"font-medium",children:[a.likesCount," likes"]})]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Activity"}),e.jsxs("div",{className:"text-lg font-bold text-gray-700",children:[l+1," of ",n.length]})]})]})}),T&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-yellow/20 rounded-full mx-auto"}),e.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-16 h-16 border-4 border-primary-yellow border-t-transparent rounded-full animate-spin"})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Loading content details..."}),e.jsx("p",{className:"text-gray-500",children:"Preparing your learning materials"})]}),v&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"text-red-500 text-5xl mb-6",children:"😕"}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:"Content Not Available"}),e.jsxs("p",{className:"text-red-600 mb-6 max-w-md mx-auto",children:["Error loading content details: ",v.message]})]}),!T&&!v&&e.jsxs("div",{className:"p-8",children:[(s==null?void 0:s.itemContent)&&e.jsxs(e.Fragment,{children:[(s==null?void 0:s.itemTypes)===1&&e.jsx("div",{className:"mb-10",children:e.jsx("div",{className:"aspect-video bg-gradient-to-br from-gray-900 to-gray-800 rounded-3xl overflow-hidden shadow-2xl border-4 border-gray-200",children:e.jsx("video",{controls:!0,className:"w-full h-full object-cover",src:s.itemContent,children:"Your browser does not support the video tag."})})}),(s==null?void 0:s.itemTypes)===0&&e.jsx("div",{className:"mb-10",children:e.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-3xl overflow-hidden shadow-2xl border-4 border-gray-200",children:e.jsx("img",{className:"w-full h-auto object-cover",src:s.itemContent,alt:a.title})})}),((s==null?void 0:s.itemTypes)===2||(s==null?void 0:s.itemTypes)===void 0)&&e.jsx("div",{className:"mb-10",children:e.jsx("div",{className:"prose prose-lg max-w-none text-gray-800",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:s.itemContent}})})}),(s==null?void 0:s.itemTypes)===3&&e.jsx("div",{className:"mb-10",children:e.jsx("div",{className:"prose prose-lg max-w-none text-gray-800",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:s.itemContent}})})}),(s==null?void 0:s.itemTypes)===4&&e.jsx("div",{className:"mb-10",children:e.jsx("div",{className:"prose prose-lg max-w-none text-gray-800",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:s.itemContent}})})}),e.jsx("div",{className:"flex justify-end mb-10",children:$(a.learningContentId)?e.jsxs("div",{className:"bg-gradient-to-r from-green-100 to-green-200 text-green-700 px-8 py-3 rounded-xl flex items-center shadow-lg",children:[e.jsx(me,{size:20,className:"mr-3"}),"Completed ✓"]}):e.jsxs(m,{onClick:()=>ee(a.learningContentId),disabled:k,className:`${I.HIGHLIGHT_FRAME} px-8 py-3 flex items-center`,children:[k?e.jsx(O,{size:20,className:"mr-3 animate-spin"}):e.jsx(ce,{size:20,className:"mr-3"}),k?"Marking...":"Mark as Complete"]})})]}),(s==null?void 0:s.hint)&&e.jsx("div",{className:"mb-10",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-3xl p-8 border border-purple-100 shadow-lg",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"p-3 bg-purple-500 rounded-xl mr-4",children:e.jsx(xe,{size:24,className:"text-white"})}),e.jsx("h4",{className:"text-xl font-bold text-purple-900",children:"Hint"})]}),e.jsx("div",{className:"text-purple-800 prose max-w-none",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:s.hint}})})]})}),(s==null?void 0:s.additionalData)&&e.jsx("div",{className:"mb-10",children:e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 rounded-3xl p-8 border border-indigo-100 shadow-lg",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"p-3 bg-indigo-500 rounded-xl mr-4",children:e.jsx(he,{size:24,className:"text-white"})}),e.jsx("h4",{className:"text-xl font-bold text-indigo-900",children:"Additional Information"})]}),e.jsx("div",{className:"text-indigo-800 prose max-w-none",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:s.additionalData}})})]})}),!(s!=null&&s.itemContent)&&!T&&!v&&e.jsxs("div",{className:"text-center p-16 bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50 rounded-3xl mb-10 border border-gray-200 shadow-lg",children:[e.jsx("div",{className:`w-24 h-24 bg-gradient-to-r ${S(a.contentType)} rounded-full flex items-center justify-center mx-auto mb-8 shadow-lg`,children:e.jsx("div",{className:"text-white",children:L(a.contentType,48)})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:a.title}),e.jsxs("p",{className:"text-gray-600 mb-8 max-w-lg mx-auto text-lg",children:["This"," ",M(a.contentType).toLowerCase()," ","content is being prepared and will be available soon. Stay tuned!"]}),e.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-gray-100 rounded-full text-sm text-gray-600",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full mr-2 animate-pulse"}),"Coming Soon"]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-8 border-t border-gray-200",children:[e.jsxs("div",{className:"flex space-x-4",children:[a.contentType===2&&e.jsxs(m,{onClick:()=>_("quiz",a.learningContentId),className:I.HIGHLIGHT_FRAME,children:[e.jsx(q,{size:20,className:"mr-3"}),"Start Quiz"]}),a.contentType===1&&e.jsxs(m,{onClick:()=>_("challenge",a.learningContentId),className:I.HIGHLIGHT_FRAME,children:[e.jsx(G,{size:20,className:"mr-3"}),"Begin Challenge"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(m,{onClick:()=>h(Math.max(0,l-1)),disabled:l===0,variant:"outline",className:"px-6 py-3 rounded-xl border-2 border-gray-300 hover:border-gray-400 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:"← Previous"}),e.jsx(m,{onClick:()=>h(Math.min(n.length-1,l+1)),disabled:l===n.length-1,variant:"outline",className:"px-6 py-3 rounded-xl border-2 border-gray-300 hover:border-gray-400 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:"Next →"})]})]})]})]}):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(u,{size:32,className:"text-gray-400"})}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No learning content selected"})]})})]})})]})}function Le(){const{courseId:l,moduleId:h}=U(),c=Q(),d=()=>{c(`/learn/course/${l}`)};return e.jsx("div",{className:"w-full px-4",children:e.jsx("div",{className:"max-w-7xl mx-auto flex flex-col gap-6",children:e.jsx(we,{moduleId:parseInt(h),courseId:l,onBack:d})})})}export{Le as default};
