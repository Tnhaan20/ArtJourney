import{d as oe,c as Se,ai as ke,b as De,$ as Me,r as n,j as e,aj as L,J as Te,k as F,A as ae,S as Ge,D as R,ak as re,l as Ie,o as Le,t as $e}from"./index-B1yiEii3.js";import{S as C}from"./sparkles-RlciBJ4K.js";import{a as le,M as Y,T as ne}from"./timer-DCQwNqUC.js";import{C as V}from"./crown-D6N-C8ou.js";import{P as Ae}from"./play-DpOGKTUF.js";import{Z as Ee}from"./zap-ny9qrxgZ.js";import{C as _}from"./circle-alert-278jLJkD.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Oe=oe("gift",Be);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Pe=oe("rotate-ccw",ze);function Fe({courseId:j,challengeId:N,challengeData:S,challengeInfo:U,autoStart:o=!1}){const k=Se(),{useSessionForm:g}=ke(),{getCurrentUser:v}=De(),{toast:u}=Me(),{user:c}=v(),[l,f]=n.useState(o?"playing":"ready"),[y,p]=n.useState(S.challenge.durationSeconds),[i,$]=n.useState(0),[D,A]=n.useState({}),[b,E]=n.useState(null),[ie,q]=n.useState(o?Date.now():null),[H,Q]=n.useState(0),[d,M]=n.useState(0),[B,J]=n.useState(!1),[T,Z]=n.useState(!1),[Re,Ye]=n.useState(!0),[ce,G]=n.useState(null),{challenge:m,artworks:de,details:x}=S,{form:w,onSubmit:me,isLoading:K,isSuccess:O,error:z}=g();n.useEffect(()=>{o&&W()},[o]),n.useEffect(()=>{let s;return l==="playing"&&y>0&&(s=setInterval(()=>{p(t=>t<=1?(X(),0):t-1)},1e3)),()=>clearInterval(s)},[l,y]),n.useEffect(()=>{if(B){const s=setTimeout(()=>J(!1),2e3);return()=>clearTimeout(s)}},[B]),n.useEffect(()=>{O&&u({title:"🎉 Amazing!",description:"Your wonderful performance has been saved!",variant:"success"}),z&&u({title:"😅 Oops!",description:"Couldn't save your progress. But don't worry, you can try again!",variant:"destructive"})},[O,z,u]);const W=()=>{f("playing"),q(Date.now()),p(m.durationSeconds),$(0),A({}),M(0)},X=()=>{f("finished");const s=Date.now(),t=Math.floor((s-ie)/1e3);Q(t);const a=Object.entries(D).filter(([ye,we])=>{const te=x.find(Ce=>Ce.id===parseInt(we));return te&&te.correctMatch===parseInt(ye)}).length,r=a/x.length*100,I=Math.max(0,(m.durationSeconds-t)/m.durationSeconds*20),h=d*5,se=Math.min(100,r+I+h);$(se),Z(a===x.length),xe(se,t,a===x.length)},xe=(s,t,a)=>{if(!(c!=null&&c.id)){u({title:"🔐 Authentication Required",description:"Please login to save your progress!",variant:"destructive"});return}const r={userId:c.id,challengeId:parseInt(N),score:Math.round(s),timeTaken:t,isCompleted:a};w.setValue("userId",r.userId),w.setValue("challengeId",r.challengeId),w.setValue("score",r.score),w.setValue("timeTaken",r.timeTaken),w.setValue("isCompleted",r.isCompleted),me()},he=(s,t)=>{E(t),s.dataTransfer.effectAllowed="move",s.target.style.opacity="0.5"},be=s=>{s.target.style.opacity="1",G(null)},ge=s=>{s.preventDefault(),s.dataTransfer.dropEffect="move"},ue=(s,t)=>{s.preventDefault(),G(t.id)},fe=s=>{s.preventDefault(),G(null)},pe=(s,t)=>{if(s.preventDefault(),G(null),b&&l==="playing"){const a={...D};Object.keys(a).forEach(h=>{a[h]===b.id&&delete a[h]}),a[t.id]=b.id,A(a);const r=x.find(h=>h.id===b.id);r&&r.correctMatch===t.id?(M(h=>h+1),J(!0)):M(0),Object.keys(a).length===x.length&&setTimeout(()=>X(),1500)}E(null)},P=s=>{const t=Math.floor(s/60),a=s%60;return`${t}:${a.toString().padStart(2,"0")}`},je=()=>{const s=y/m.durationSeconds*100;return s>50?"text-green-700 bg-green-100 border-green-300":s>25?"text-amber-700 bg-amber-100 border-amber-300":"text-red-700 bg-red-100 border-red-300 animate-pulse"},Ne=s=>{const t=D[s];if(!t)return null;const a=x.find(I=>I.id===t),r=a&&a.correctMatch===s;return{detail:a,isCorrect:r}},ve=()=>{f("playing"),p(m.durationSeconds),$(0),A({}),E(null),q(Date.now()),Q(0),M(0),Z(!1)},ee=i>=90?{color:"text-amber-800 bg-amber-100 border-amber-400",icon:e.jsx(V,{className:"w-5 h-5"})}:i>=75?{color:"text-orange-800 bg-orange-100 border-orange-400",icon:e.jsx(F,{className:"w-5 h-5"})}:i>=50?{color:"text-yellow-800 bg-yellow-100 border-yellow-400",icon:e.jsx(Y,{className:"w-5 h-5"})}:{color:"text-gray-700 bg-gray-100 border-gray-300",icon:e.jsx(ne,{className:"w-5 h-5"})};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-amber-50 to-yellow-100 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-30",children:[e.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-gradient-to-br from-amber-200 to-yellow-300 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute top-1/4 right-0 w-96 h-96 bg-gradient-to-br from-yellow-200 to-orange-300 rounded-full blur-3xl animate-pulse delay-1000"}),e.jsx("div",{className:"absolute bottom-0 left-1/3 w-80 h-80 bg-gradient-to-br from-orange-200 to-amber-300 rounded-full blur-3xl animate-pulse delay-2000"})]}),e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(20)].map((s,t)=>e.jsx("div",{className:"absolute animate-float opacity-20",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${3+Math.random()*2}s`},children:e.jsx(C,{className:"w-4 h-4 text-amber-400"})},t))}),B&&d>1&&e.jsx("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 animate-bounce",children:e.jsxs("div",{className:"bg-gradient-to-r from-amber-400 to-orange-500 text-white px-6 py-3 rounded-full shadow-2xl text-2xl font-bold flex items-center space-x-2",children:[e.jsx(L,{className:"w-6 h-6"}),e.jsxs("span",{children:["COMBO x",d,"!"]}),e.jsx(L,{className:"w-6 h-6"})]})}),e.jsx("div",{className:"relative z-10 bg-white/80 backdrop-blur-md border-b border-amber-200 shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>k(`/learn/course/${j}`),className:"flex items-center space-x-2 text-gray-700 hover:text-gray-900 transition-all duration-200 bg-white/70 hover:bg-white/90 px-4 py-2 rounded-xl backdrop-blur-sm border border-amber-200 shadow-md",children:[e.jsx(Te,{size:20}),e.jsx("span",{className:"font-medium",children:"Back to Course"})]}),e.jsx("div",{className:"h-8 w-px bg-amber-300"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-amber-400 to-orange-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(F,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:m.name}),e.jsx("p",{className:"text-amber-600 text-sm",children:"Art Matching Challenge"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[l==="playing"&&e.jsxs("div",{className:`flex items-center space-x-3 ${je()} border rounded-xl px-4 py-3 backdrop-blur-sm shadow-lg`,children:[e.jsx(le,{className:"w-5 h-5"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-mono text-xl font-bold",children:P(y)}),e.jsx("div",{className:"text-xs opacity-75",children:"Time Left"})]})]}),e.jsxs("div",{className:`flex items-center space-x-3 ${ee.color} border rounded-xl px-4 py-3 backdrop-blur-sm shadow-lg`,children:[ee.icon,e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold",children:Math.round(i)}),e.jsx("div",{className:"text-xs opacity-75",children:"Score"})]})]}),d>1&&e.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-amber-400 to-orange-500 text-white border border-amber-300 rounded-xl px-4 py-3 shadow-lg animate-pulse",children:[e.jsx(L,{className:"w-5 h-5"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xl font-bold",children:["x",d]}),e.jsx("div",{className:"text-xs opacity-90",children:"Combo"})]})]})]})]})})}),e.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l==="ready"&&!o&&e.jsx("div",{className:"text-center max-w-3xl mx-auto",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl p-10 border border-amber-200",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-amber-400 to-orange-500 rounded-full flex items-center justify-center mx-auto shadow-2xl",children:e.jsx(V,{className:"w-12 h-12 text-white"})}),e.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center",children:e.jsx(C,{className:"w-4 h-4 text-yellow-800"})})]}),e.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-4",children:"Ready to Master Art?"}),e.jsxs("p",{className:"text-gray-600 text-lg mb-8 leading-relaxed",children:["Step into the beautiful world of masterpieces! Match each artwork with its correct artist, period, and year. You have ",e.jsx("span",{className:"font-bold text-amber-600",children:P(m.durationSeconds)})," to become an art expert!"]}),e.jsxs("div",{className:"bg-gradient-to-r from-amber-100 to-yellow-100 border border-amber-300 rounded-2xl p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(ae,{className:"w-6 h-6 text-amber-600"}),e.jsx("h3",{className:"font-bold text-amber-800 text-xl",children:"Game Rules"}),e.jsx(ae,{className:"w-6 h-6 text-amber-600"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-amber-700",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-amber-800 font-bold text-sm",children:"1"})}),e.jsx("span",{children:"Drag artist cards to artworks"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-amber-800 font-bold text-sm",children:"2"})}),e.jsx("span",{children:"Build combos for bonus points"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-amber-800 font-bold text-sm",children:"3"})}),e.jsx("span",{children:"Match all before time runs out"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-amber-800 font-bold text-sm",children:"4"})}),e.jsx("span",{children:"Earn time bonus for speed"})]})]})]}),e.jsxs("button",{onClick:W,className:"group bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white px-10 py-5 rounded-2xl font-bold text-lg transition-all duration-300 transform hover:scale-105 shadow-2xl flex items-center space-x-3 mx-auto",children:[e.jsx(Ae,{size:24}),e.jsx("span",{children:"Start Your Art Journey"}),e.jsx(C,{className:"w-5 h-5 group-hover:animate-spin"})]})]})}),l==="playing"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-amber-100 to-yellow-100 border border-amber-300 rounded-2xl p-6 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-full p-3",children:e.jsx(Ee,{size:20})}),e.jsx("h3",{className:"font-bold text-amber-800 text-xl",children:"How to Play"})]}),e.jsxs("p",{className:"text-amber-700 text-center",children:["🎨 Drag the ",e.jsx("span",{className:"font-bold text-amber-800",children:"artist information cards"})," and drop them on the correct artwork. Build combos for bonus points! ⚡"]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-12",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-amber-400 to-orange-500 rounded-full flex items-center justify-center",children:e.jsx(Ge,{className:"w-4 h-4 text-white"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Masterpieces"})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:de.map(s=>{const t=Ne(s.id),a=ce===s.id;return e.jsxs("div",{className:`group relative bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg overflow-hidden border-2 transition-all duration-500 transform hover:scale-105 ${t?t.isCorrect?"border-green-400 bg-green-50 shadow-green-200":"border-red-400 bg-red-50 shadow-red-200":a?"border-amber-400 bg-amber-50 shadow-amber-200 scale-105":"border-amber-200 hover:border-amber-300"}`,onDragOver:ge,onDragEnter:r=>ue(r,s),onDragLeave:fe,onDrop:r=>pe(r,s),children:[e.jsxs("div",{className:"aspect-square relative overflow-hidden",children:[e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),a&&e.jsx("div",{className:"absolute inset-0 bg-amber-400/30 backdrop-blur-sm flex items-center justify-center",children:e.jsx("div",{className:"text-white font-bold text-lg animate-pulse",children:"Drop Here!"})}),t&&e.jsx("div",{className:"absolute top-4 right-4",children:t.isCorrect?e.jsx("div",{className:"bg-green-500 text-white p-2 rounded-full shadow-lg animate-bounce",children:e.jsx(R,{className:"w-6 h-6"})}):e.jsx("div",{className:"bg-red-500 text-white p-2 rounded-full shadow-lg animate-pulse",children:e.jsx(re,{className:"w-6 h-6"})})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h4",{className:"font-bold text-gray-800 text-lg mb-4",children:s.title}),t&&e.jsxs("div",{className:`p-4 rounded-xl ${t.isCorrect?"bg-green-100 border border-green-300":"bg-red-100 border border-red-300"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`font-bold ${t.isCorrect?"text-green-700":"text-red-700"}`,children:t.detail.artist}),t.isCorrect&&e.jsx(Oe,{className:"w-5 h-5 text-green-600"})]}),e.jsxs("p",{className:`text-sm ${t.isCorrect?"text-green-600":"text-red-600"}`,children:[t.detail.period," • ",t.detail.year]})]})]})]},s.id)})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-amber-500 to-orange-500 rounded-full flex items-center justify-center",children:e.jsx(Y,{className:"w-4 h-4 text-white"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Artist Information"})]}),e.jsx("div",{className:"space-y-4",children:x.map(s=>{const t=Object.values(D).includes(s.id),a=(b==null?void 0:b.id)===s.id;return e.jsx("div",{className:`group bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 border-2 transition-all duration-300 transform ${t?"border-gray-300 opacity-50 scale-95":a?"border-amber-400 bg-amber-50 shadow-amber-200 scale-105 rotate-2":"border-amber-200 hover:border-amber-300 hover:bg-amber-50 cursor-move hover:scale-105"}`,draggable:!t,onDragStart:r=>he(r,s),onDragEnd:be,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-amber-400 to-orange-500 rounded-full"}),e.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:s.artist})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[e.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full"}),e.jsx("span",{className:"text-sm",children:s.period})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full"}),e.jsx("span",{className:"text-sm",children:s.year})]})]}),t?e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx(R,{className:"w-6 h-6 text-green-600"})}):e.jsx("div",{className:"bg-amber-100 p-3 rounded-full group-hover:bg-amber-200 transition-colors",children:e.jsx(ne,{className:"w-6 h-6 text-amber-600 group-hover:text-amber-700"})})]})},s.id)})})]})]})]}),l==="finished"&&e.jsx("div",{className:"text-center max-w-3xl mx-auto",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl p-10 border border-amber-200",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("div",{className:"w-28 h-28 bg-gradient-to-r from-amber-400 to-orange-500 rounded-full flex items-center justify-center mx-auto shadow-2xl",children:T?e.jsx(V,{className:"w-14 h-14 text-white"}):e.jsx(Y,{className:"w-14 h-14 text-white"})}),T&&e.jsx("div",{className:"absolute -top-4 -right-4 w-12 h-12 bg-yellow-400 rounded-full flex items-center justify-center animate-bounce",children:e.jsx(C,{className:"w-6 h-6 text-yellow-800"})})]}),e.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-4",children:T?"🏆 Perfect Match!":"🎨 Challenge Complete!"}),e.jsx("p",{className:"text-gray-600 text-lg mb-8",children:T?"Outstanding! You've achieved perfect mastery of art matching!":"Great job! You've completed the art challenge beautifully!"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[e.jsxs("div",{className:"bg-gradient-to-r from-amber-100 to-yellow-100 border border-amber-300 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-3",children:[e.jsx(F,{className:"w-6 h-6 text-amber-600"}),e.jsx("span",{className:"font-bold text-amber-800",children:"Final Score"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:Math.round(i)}),e.jsx("p",{className:"text-amber-700 text-sm mt-1",children:i>=90?"Legendary!":i>=75?"Excellent!":i>=50?"Good!":"Keep practicing!"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 border border-yellow-300 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-3",children:[e.jsx(le,{className:"w-6 h-6 text-yellow-600"}),e.jsx("span",{className:"font-bold text-yellow-800",children:"Time Taken"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:P(H)}),e.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:H<m.durationSeconds*.5?"Lightning fast!":"Well done!"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-100 to-red-100 border border-orange-300 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-3",children:[e.jsx(L,{className:"w-6 h-6 text-orange-600"}),e.jsx("span",{className:"font-bold text-orange-800",children:"Max Combo"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-800",children:["x",d]}),e.jsx("p",{className:"text-orange-700 text-sm mt-1",children:d>3?"Combo master!":d>1?"Nice streak!":"Try combos!"})]})]}),K&&e.jsx("div",{className:"bg-amber-100 border border-amber-300 rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-amber-600 border-t-transparent"}),e.jsx("span",{className:"text-amber-800 font-medium",children:"Saving your progress..."})]})}),O&&e.jsx("div",{className:"bg-green-100 border border-green-300 rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx(R,{className:"w-6 h-6 text-green-600"}),e.jsx("span",{className:"text-green-800 font-medium",children:"Progress saved successfully!"})]})}),z&&e.jsx("div",{className:"bg-red-100 border border-red-300 rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx(re,{className:"w-6 h-6 text-red-600"}),e.jsx("span",{className:"text-red-800 font-medium",children:"Couldn't save progress. Try again!"})]})}),e.jsxs("div",{className:"flex justify-center space-x-6",children:[e.jsxs("button",{onClick:ve,className:"group bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white px-8 py-4 rounded-2xl font-bold transition-all duration-300 transform hover:scale-105 shadow-xl flex items-center space-x-3",disabled:K,children:[e.jsx(Pe,{size:20}),e.jsx("span",{children:"Play Again"}),e.jsx(C,{className:"w-5 h-5 group-hover:animate-spin"})]}),e.jsx("button",{onClick:()=>k(`/learn/course/${j}`),className:"bg-white/80 hover:bg-white/90 text-gray-700 px-8 py-4 rounded-2xl font-bold transition-all duration-300 transform hover:scale-105 shadow-lg backdrop-blur-sm border border-amber-200",children:"Back to Course"})]})]})})]}),e.jsx("style",{jsx:!0,children:`
        @keyframes float {
          0%, 100% { transform: translateY(0px); }
          50% { transform: translateY(-20px); }
        }
        .animate-float {
          animation: float 3s ease-in-out infinite;
        }
      `})]})}function Ke(){var p;const{courseId:j,challengeId:N}=Ie(),{getChallengeById:S,getChallengeByCourse:U}=Le(),{data:o,isLoading:k,error:g}=S(N),{data:v,isLoading:u,error:c}=U(j),l=(p=v==null?void 0:v.data)==null?void 0:p.find(i=>i.id===parseInt(N)),f=l==null?void 0:l.challengeType;return k||u?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-amber-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center bg-white p-8 rounded-2xl shadow-xl",children:[e.jsx($e,{className:"animate-spin w-16 h-16 text-amber-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Loading Challenge"}),e.jsx("p",{className:"text-gray-600",children:"Preparing your game..."})]})}):g||c?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center bg-white p-8 rounded-2xl shadow-xl max-w-md",children:[e.jsx(_,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Challenge Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:(g==null?void 0:g.message)||(c==null?void 0:c.message)||"Unable to load challenge"}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-red-500 text-white px-6 py-3 rounded-lg hover:bg-red-600 transition-colors font-medium",children:"Go Back"})]})}):l?o!=null&&o.data?(()=>{switch(f){case"Drag&Drop":return e.jsx(Fe,{courseId:j,challengeId:N,challengeData:o.data,challengeInfo:l,autoStart:!0});case"Quiz":return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-emerald-50",children:e.jsxs("div",{className:"text-center bg-white p-8 rounded-2xl shadow-xl",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Quiz Game"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Quiz component coming soon..."}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Challenge: ",l.name]})]})});case"Drawing":return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 to-pink-50",children:e.jsxs("div",{className:"text-center bg-white p-8 rounded-2xl shadow-xl",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Drawing Game"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Drawing component coming soon..."}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Challenge: ",l.name]})]})});default:return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100",children:e.jsxs("div",{className:"text-center bg-white p-8 rounded-2xl shadow-xl",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Unknown Challenge Type"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:['Challenge type "',f,'" is not supported yet.']}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Challenge: ",l.name]})]})})}})():e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center bg-white p-8 rounded-2xl shadow-xl max-w-md",children:[e.jsx(_,{className:"w-16 h-16 text-amber-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Game Data Not Available"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Challenge game data is not available yet."}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-amber-500 text-white px-6 py-3 rounded-lg hover:bg-amber-600 transition-colors font-medium",children:"Go Back"})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center bg-white p-8 rounded-2xl shadow-xl max-w-md",children:[e.jsx(_,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Challenge Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"This challenge is not associated with the specified course."}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-red-500 text-white px-6 py-3 rounded-lg hover:bg-red-600 transition-colors font-medium",children:"Go Back"})]})})}export{Ke as default};
