import{c as F,n as U,b as W,r as Y,j as e,L as M,B as v,d as _,e as J,o as Q,p as Z,q as X,V as ee,s as se,t as te,v as re,w as ae,x as G,z as y,y as ne,A as le,l as ie,D as oe,T as B,E as ce,G as T,k as de,H as me}from"./index-1nwYTKl8.js";import{t as xe}from"./team-member-1-B2-9RCyU.js";import{C as he,P as ue}from"./Completed-D2G4BSkS.js";import{C as K}from"./circle-alert-wcqrSuob.js";import{P as ge}from"./play-DY1ZNMNC.js";import{A as pe}from"./award-CFbDy9WT.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],V=F("globe",ye);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],fe=F("lock",be);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],z=F("target",je),Ne="/ArtJourney/assets/course-header-C5-n0iwu.png",ve=d=>{try{const n=JSON.parse(d);return typeof n!="object"||n===null?[]:Object.keys(n).filter(o=>o.startsWith("oc")).sort((o,t)=>{const a=parseInt(o.replace("oc",""),10),h=parseInt(t.replace("oc",""),10);return a-h}).map(o=>n[o]).filter(o=>o&&typeof o=="string"&&o.trim().length>0).map(o=>o.trim())}catch(n){return console.warn("Failed to parse learning outcomes JSON:",n),[]}},H=(d,n=[])=>{if(Array.isArray(d)&&d.length>0)return d;if(typeof d=="string"&&d.trim()){const x=d.trim();if(x.startsWith("{")&&x.endsWith("}")){const t=ve(x);if(t.length>0)return t}const r=x.replace(/\r\n/g,`
`).replace(/\r/g,`
`);let o=[];return r.includes(`
`)&&(o=r.split(`
`).map(t=>t.trim()).filter(t=>t.length>0).map(t=>t.replace(/^[-‚Ä¢*]\s*/,"").replace(/^\d+\.\s*/,"").trim()).filter(t=>t.length>0)),o.length===0&&r.includes(";")&&(o=r.split(";").map(t=>t.trim()).filter(t=>t.length>0)),o.length===0&&(o=r.split(/[‚Ä¢-]/).map(t=>t.trim()).filter(t=>t.length>0)),o.length===0&&(o=r.split(/\d+\./).map(t=>t.trim()).filter(t=>t.length>0)),o.length>0?o:[r]}return n};function we(){const d=t=>{if(!t||typeof t!="string")return"0 hours";const a=t.split(":");if(a.length!==3)return"0 hours";const h=parseInt(a[0],10),m=parseInt(a[1],10),g=parseInt(a[2],10),p=h+m/60+g/3600;if(p===0)return"0 hours";if(p<1){const b=Math.round(m+g/60);return`${b} min${b!==1?"s":""}`}else{if(p<2)return m<30?"1 hour":"1.5 hours";{const b=Math.round(p*2)/2;return`${b} hour${b!==1?"s":""}`}}},n=t=>{if(!t||typeof t!="string")return 0;const a=t.split(":");if(a.length!==3)return 0;const h=parseInt(a[0],10)||0,m=parseInt(a[1],10)||0,g=parseInt(a[2],10)||0;return h+m/60+g/3600},x=t=>{let a;if(typeof t=="string"?a=n(t):a=t,!a||a<=0||isNaN(a))return"0 days";const h=a/24;if(h<1){const m=Math.round(a);return`${m} hour${m!==1?"s":""}`}else{if(h<2)return"1 day";{const m=Math.round(h*2)/2;return`${m} day${m!==1?"s":""}`}}},r=t=>{let a;if(typeof t=="string"?a=n(t):a=t,!a||a<=0||isNaN(a))return"0 weeks";const h=a/(24*7);if(h<.5){const m=Math.round(a/24);if(m<1){const g=Math.round(a);return`${g} hour${g!==1?"s":""}`}return`${m} day${m!==1?"s":""}`}else{if(h<1)return"1 week";{const m=Math.round(h*2)/2;return`${m} week${m!==1?"s":""}`}}};return{formatTimeToHours:d,formatHoursToDays:x,formatHoursToWeeks:r,formatTimeAutomatically:t=>{if(!t)return"0 hours";const a=n(t);return a===0||isNaN(a)?"0 hours":a<24?d(t):a<168?x(a):r(a)},timeStringToHours:n}}function Ce({learningProgress:d,courseId:n}){var f;const{getCoursesById:x}=U(),{getCurrentUser:r}=W(),[o,t]=Y.useState({}),{data:a,isLoading:h,error:m}=x(n),{user:g}=r(),p=c=>{t(i=>({...i,[c]:!i[c]}))},b=c=>{switch(c){case 0:return{text:"Not Started",color:"gray"};case 1:return{text:"In Progress",color:"blue"};case 2:return{text:"Completed",color:"green"};default:return{text:"Not Started",color:"gray"}}},$=c=>{switch(c){case 1:return e.jsx(v,{size:16,className:"text-blue-500"});case 2:return e.jsx(ue,{size:16,className:"text-amber-500"});case 3:return e.jsx(ee,{size:16,className:"text-green-500"});default:return e.jsx(X,{size:16,className:"text-gray-500"})}},L=c=>c===2,E=()=>{var u;if(!((u=a==null?void 0:a.data)!=null&&u.moduleCourseDetailScreenResponseDTOs))return 0;let c=0,i=0;return a.data.moduleCourseDetailScreenResponseDTOs.forEach(j=>{j.subModuleCourseDetailScreenResponseDTOs.forEach(N=>{N.learningContentDetailScreenResponseDTOs.forEach(P=>{c++,P.userLearningProgressStatus===2&&i++})})}),c>0?Math.round(i/c*100):0},A=c=>{let i=0,u=0;return c.subModuleCourseDetailScreenResponseDTOs.forEach(j=>{j.learningContentDetailScreenResponseDTOs.forEach(N=>{i++,N.userLearningProgressStatus===2&&u++})}),i>0?Math.round(u/i*100):0},O=["Master fundamental art concepts and techniques","Develop critical thinking skills in art analysis","Understand historical and cultural contexts of artworks","Create your own artistic interpretations","Build a comprehensive art vocabulary","Appreciate diverse artistic styles and movements"],C=()=>{const c=l==null?void 0:l.learningOutcomes;return H(c,O)};if(h)return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gradient-to-br from-blue-50 via-white to-amber-50",children:e.jsxs("div",{className:"text-center bg-white p-8 rounded-2xl shadow-xl",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-yellow border-t-transparent mx-auto mb-6"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Loading Your Course"}),e.jsx("p",{className:"text-gray-600",children:"Preparing your learning journey..."})]})});if(m)return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gradient-to-br from-red-50 to-orange-50",children:e.jsxs("div",{className:"text-center p-8 bg-white rounded-2xl shadow-xl max-w-md",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-6",children:"‚ö†Ô∏è"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-6",children:m.message||"Unable to load course details"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-500 text-white px-6 py-3 rounded-lg hover:bg-red-600 transition-colors font-medium",children:"Try Again"})]})});const l=a==null?void 0:a.data,s=(l==null?void 0:l.courseCompletionPercentage)||E(),S=(l==null?void 0:l.coverImageUrl)||Ne;g!=null&&g.name,g!=null&&g.avatar||xe;const k=C();return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-amber-50",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("nav",{className:"flex py-4","aria-label":"Breadcrumb",children:e.jsxs("ol",{className:"flex items-center space-x-3",children:[e.jsx("li",{children:e.jsxs(M,{to:"/learn",className:"text-primary-yellow hover:text-secondary-yellow font-medium transition-colors flex items-center",children:[e.jsx(v,{size:16,className:"mr-2"}),"Learn"]})}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(_,{className:"w-4 h-4 text-gray-400 mx-2"}),e.jsx("span",{className:"text-gray-700 font-medium truncate max-w-xs",children:(l==null?void 0:l.title)||"Course Detail"})]})]})})})}),e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 z-0",style:{backgroundImage:`url(${S})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/70 via-black/50 to-transparent"})}),e.jsx("div",{className:"relative z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{className:"text-white",children:[e.jsx("div",{className:"flex items-center mb-4",children:e.jsx("div",{className:"bg-primary-yellow/20 backdrop-blur-sm rounded-full px-4 py-2 border border-primary-yellow/30",children:e.jsx("span",{className:"text-primary-yellow font-semibold",children:(l==null?void 0:l.courseLevel)===1?"Beginner":(l==null?void 0:l.courseLevel)===2?"Intermediate":(l==null?void 0:l.courseLevel)===3?"Advanced":"Beginner"})})}),e.jsx("h1",{className:"text-5xl mongro-bold font-bold mb-6 leading-tight",children:(l==null?void 0:l.title)||"Course Title"}),e.jsx("p",{className:"text-xl text-gray-200 mb-8 leading-relaxed max-w-2xl",children:(l==null?void 0:l.description)||"Kickstart your career in art. Build job-ready skills in art techniques, art history, and creative expression and learn to create beautiful artworks in just 6 months"}),e.jsxs("div",{className:"flex flex-wrap gap-6 mb-8",children:[e.jsxs("div",{className:"flex items-center bg-white/10 backdrop-blur-sm rounded-lg px-4 py-2",children:[e.jsx(v,{size:20,className:"text-primary-yellow mr-2"}),e.jsxs("span",{className:"font-medium",children:[(l==null?void 0:l.totalModule)||10," Modules"]})]}),e.jsxs("div",{className:"flex items-center bg-white/10 backdrop-blur-sm rounded-lg px-4 py-2",children:[e.jsx(J,{size:20,className:"text-primary-yellow mr-2"}),e.jsx("span",{className:"font-medium",children:we().formatHoursToDays(l==null?void 0:l.remainingTime)||"6 weeks"})]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"font-semibold",children:"Your Progress"}),e.jsxs("span",{className:"text-2xl mongro-bold font-bold text-primary-yellow",children:[s,"%"]})]}),e.jsx("div",{className:"w-full bg-white/20 rounded-full h-3 mb-2",children:e.jsx("div",{className:"bg-gradient-to-r from-primary-yellow to-secondary-yellow h-3 rounded-full transition-all duration-700 relative overflow-hidden",style:{width:`${s}%`},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-pulse"})})}),e.jsx("p",{className:"text-sm text-gray-200",children:s===100?"Course completed! üéâ":"Keep going, you're doing great!"})]})]}),e.jsx("div",{className:"lg:justify-self-end",children:e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl border border-white/20 p-8 shadow-2xl max-w-md",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(z,{size:24,className:"text-primary-yellow mr-3"}),e.jsx("h3",{className:"text-xl mongro-bold font-bold text-gray-800",children:"What You'll Learn"})]}),e.jsx("ul",{className:"space-y-4",children:k.slice(0,6).map((c,i)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("div",{className:"bg-green-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5 flex-shrink-0",children:"‚úì"}),e.jsx("span",{className:"text-gray-700 text-sm leading-relaxed",children:c})]},i))}),k.length>6&&e.jsxs("p",{className:"text-sm text-gray-500 mt-4 text-center",children:["+",k.length-6," more learning outcomes"]})]})})]})})})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Course Curriculum"}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Explore all modules and lessons in this course. Track your progress and continue where you left off."})]}),e.jsxs("div",{className:"space-y-6",children:[(f=l==null?void 0:l.moduleCourseDetailScreenResponseDTOs)==null?void 0:f.map((c,i)=>{var N,P;const u=A(c),j=o[c.moduleId];return e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300",children:[e.jsx("div",{className:"p-6 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>p(c.moduleId),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-yellow to-secondary-yellow text-white rounded-xl px-4 py-2 font-bold shadow-lg",children:i+1}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl mongro-bold font-bold text-gray-900 mb-1",children:c.moduleTitle}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("span",{children:[((N=c.subModuleCourseDetailScreenResponseDTOs)==null?void 0:N.length)||0," ","lessons"]}),e.jsx("span",{children:"‚Ä¢"}),e.jsxs("span",{children:[u,"% complete"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative w-12 h-12",children:[e.jsxs("svg",{className:"w-12 h-12 transform -rotate-90",viewBox:"0 0 36 36",children:[e.jsx("path",{className:"text-gray-300",stroke:"currentColor",strokeWidth:"3",fill:"transparent",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),e.jsx("path",{className:"text-primary-yellow",stroke:"currentColor",strokeWidth:"3",fill:"transparent",strokeDasharray:`${u}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-xs font-bold text-gray-700",children:[u,"%"]})})]}),j?e.jsx(Q,{className:"w-6 h-6 text-gray-400"}):e.jsx(Z,{className:"w-6 h-6 text-gray-400"})]})]})}),j&&e.jsx("div",{className:"border-t border-gray-100 bg-gray-50/50",children:e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:(P=c.subModuleCourseDetailScreenResponseDTOs)==null?void 0:P.map((w,D)=>{var q;return e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 hover:shadow-md transition-all duration-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-secondary-yellow text-primary-blue rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold",children:D+1}),e.jsxs(M,{to:`/learn/course/${n}/module/${c.moduleId}/submodule/${w.subModuleId}`,className:"font-semibold text-gray-800 hover:text-primary-yellow transition-colors group flex items-center",children:[e.jsx("span",{children:w.subModuleTitle}),e.jsx(_,{className:"w-4 h-4 ml-2 text-gray-400 group-hover:text-primary-yellow transition-colors"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:(q=w.learningContentDetailScreenResponseDTOs)==null?void 0:q.map((I,Le)=>{const R=b(I.userLearningProgressStatus);return e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 hover:bg-white hover:shadow-sm transition-all duration-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(he,{isCompleted:L(I.userLearningProgressStatus),className:"flex-shrink-0",size:16}),$(I.contentType),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:I.learningContentTitle}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium inline-block mt-1 ${R.color==="green"?"bg-green-100 text-green-700":R.color==="blue"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}`,children:R.text})]})]})},`${c.moduleId}-${w.subModuleId}-${I.learningContentId}`)})})]},`${c.moduleId}-${w.subModuleId}-${D}`)})})})})]},c.moduleId)}),(!(l!=null&&l.moduleCourseDetailScreenResponseDTOs)||l.moduleCourseDetailScreenResponseDTOs.length===0)&&e.jsxs("div",{className:"text-center py-16 bg-white rounded-2xl border border-gray-200 shadow-lg",children:[e.jsx(v,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:"Course Modules Coming Soon!"}),e.jsx("p",{className:"text-gray-600",children:"We're preparing amazing content for you. Stay tuned!"})]})]})]})]})}const ke={post:{createPayment:async d=>(await se.post("/Payment/create-payment-link",d)).data}},Pe=()=>{const{toast:d}=te(),n=new re;return{createPaymentMutation:ae({mutationKey:[G.PAYMENT.CREATE_PAYMENT_LINK],mutationFn:async r=>await ke.post.createPayment(r),onSuccess:async r=>{r!=null&&r.checkoutUrl?(d({title:"Payment link created successfully",description:"Redirecting to payment gateway...",variant:"success"}),setTimeout(()=>{window.location.href=r.checkoutUrl},1e3)):d({title:"Payment created",description:r.message||"Payment processing initiated",variant:"success"})},onError:r=>{var o,t;console.error("Payment creation failed:",r),d({title:"Payment creation failed",description:((t=(o=r.response)==null?void 0:o.data)==null?void 0:t.message)||"Failed to create payment link",variant:"destructive"})},onSettled:()=>{n.invalidateQueries({queryKey:[G.PAYMENT.CREATE_PAYMENT_LINK]})}})}},Te=y.object({courseId:y.number().positive("Course ID must be a positive number").int("Course ID must be an integer"),name:y.string().min(1,"Course name is required").max(200,"Course name must not exceed 200 characters").trim(),quantity:y.number().min(1,"Quantity must be at least 1").max(10,"Maximum quantity is 10").int("Quantity must be an integer"),price:y.number().min(0,"Price must be 0 or greater").max(1e8,"Price exceeds maximum limit")}),Me=y.object({buyerName:y.string().min(2,"Buyer name must be at least 2 characters").max(100,"Buyer name must not exceed 100 characters").regex(/^[a-zA-Z√Ä-·ªπ\s]+$/,"Buyer name can only contain letters and spaces").trim(),buyerEmail:y.string().email("Please enter a valid email address").min(1,"Email is required").max(254,"Email address is too long").toLowerCase().trim(),buyerPhone:y.string().min(10,"Phone number must be at least 10 digits").max(15,"Phone number must not exceed 15 digits").regex(/^[\+]?[0-9\s\-\(\)]+$/,"Please enter a valid phone number").trim(),description:y.string().min(1,"Description is required").max(500,"Description must not exceed 500 characters").trim(),items:y.array(Te).min(1,"At least one item is required").max(10,"Maximum 10 items allowed").refine(d=>{const n=d.map(x=>x.courseId);return n.length===new Set(n).size},"Duplicate courses are not allowed")}),Se=()=>{const{createPaymentMutation:d}=Pe(),n=ne({resolver:le(Me),defaultValues:{buyerName:"Nhan",buyerEmail:"",buyerPhone:"0365666666",description:"thanh toan khoa hoc",items:[{courseId:0,name:"",quantity:1,price:0}]}});return{form:n,onSubmit:async r=>{await d.mutateAsync(r),n.reset()},isLoading:d.isPending}};function De({courseId:d,isAuthenticated:n}){const x=ie(),{user:r}=W(),{useGetCoursePublic:o}=U(),{data:t,isLoading:a,error:h}=o(d),{enrollUser:m,isLoading:g,isSuccess:p,error:b}=oe(),{onSubmit:$,isLoading:L}=Se(),E=()=>{const i=t==null?void 0:t.data;return H(i,["Master fundamental concepts and techniques","Develop critical thinking skills","Understand key principles and applications","Create practical projects","Build comprehensive knowledge","Apply learning to real-world scenarios"])},A=()=>{const i=t==null?void 0:t.data,u=H(i,[]);return u.length>0?u.slice(0,3).join(", "):(i==null?void 0:i.description)||"Master comprehensive knowledge and practical skills in this subject area"};Y.useEffect(()=>{if(p){const i=setTimeout(()=>{window.location.reload()},2e3);return()=>clearTimeout(i)}},[p]);const O=async()=>{if(!n||!(r!=null&&r.id)){x("/signin");return}if((s==null?void 0:s.price)===0)try{await m(r.id,d)}catch(i){console.error("Enrollment failed:",i)}else try{const i={buyerName:(r==null?void 0:r.name)||(r==null?void 0:r.firstName)||"Student",buyerEmail:(r==null?void 0:r.email)||"",buyerPhone:(r==null?void 0:r.phone)||"0354545454",description:"thanh toan khoa hoc",items:[{courseId:parseInt(d),name:(s==null?void 0:s.title)||"Course",quantity:1,price:(s==null?void 0:s.price)||0}]};await $(i)}catch(i){console.error("Payment creation failed:",i)}},C=i=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(i),l=()=>f?n?(s==null?void 0:s.price)===0?{text:g?"Enrolling...":p?"Enrolled! ‚úì":"Start Learning",disabled:g,showPrice:!1}:{text:L?"Creating Payment...":`Purchase for ${C(s.price)}`,disabled:L,showPrice:!0}:{text:(s==null?void 0:s.price)===0?"Sign In to Start":`Purchase for ${C(s.price)}`,disabled:!1,showPrice:(s==null?void 0:s.price)>0}:{text:"Content Coming Soon",disabled:!0,showPrice:!1};if(a)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-amber-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center bg-white p-8 rounded-2xl shadow-xl max-w-md mx-4",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-yellow border-t-transparent mx-auto"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(V,{className:"h-6 w-6 text-primary-yellow"})})]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Loading Course Preview"}),e.jsx("p",{className:"text-gray-600 mb-4",children:n?"Preparing your course preview...":"Loading course information..."}),e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-primary-yellow rounded-full animate-pulse"}),e.jsx("div",{className:"w-2 h-2 bg-primary-yellow rounded-full animate-pulse delay-75"}),e.jsx("div",{className:"w-2 h-2 bg-primary-yellow rounded-full animate-pulse delay-150"})]}),n&&r&&e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-center text-sm text-gray-500",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:["Welcome, ",r.name||r.email,"!"]})]})}),!n&&e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-center text-sm text-gray-500",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"Viewing as guest"})]})})]})});if(h)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-8 bg-white rounded-2xl shadow-xl max-w-md mx-4",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-6",children:"üö´"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Course Not Available"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't load this course preview. It might be temporarily unavailable or you don't have access to it."}),e.jsx("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200 mb-6",children:e.jsxs("p",{className:"text-sm text-red-600",children:["Error: ",h.message||"Failed to load course data"]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-500 text-white px-6 py-3 rounded-lg hover:bg-red-600 transition-colors font-medium",children:"Try Again"}),e.jsx(M,{to:"/learn",className:"bg-gray-100 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Browse Other Courses"})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsx("p",{className:"text-xs text-gray-500",children:"If this problem persists, please contact support"})})]})});const s=t==null?void 0:t.data,S=E(),k=i=>{switch(i){case 0:return"Beginner";case 1:return"Intermediate";case 2:return"Advanced";default:return"Unknown"}},f=(s==null?void 0:s.moduleCourseDetailScreenResponseDTOs)&&s.moduleCourseDetailScreenResponseDTOs.length>0,c=l();return e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl p-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("span",{className:"bg-primary-yellow text-white px-3 py-1 rounded-full text-sm font-medium",children:k(s==null?void 0:s.courseLevel)}),s!=null&&s.isPremium?e.jsx("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium",children:"Premium"}):e.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:"Standard"}),(s==null?void 0:s.price)===0?e.jsx("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:"Free"}):e.jsx("span",{className:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-medium",children:C(s.price)})]}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:s==null?void 0:s.title}),e.jsx("p",{className:"text-lg text-gray-600 mb-6",children:s==null?void 0:s.description}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{className:"w-5 h-5 text-primary-yellow"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[(s==null?void 0:s.totalModule)||0," Modules"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{className:"w-5 h-5 text-primary-yellow"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[(s==null?void 0:s.courseCompletionPercentage)||0,"% Complete"]})]})]}),!f&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium text-orange-800",children:"Course content is being prepared and will be available soon."})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("button",{onClick:O,disabled:c.disabled,className:`flex items-center justify-center space-x-2 px-6 py-3 rounded-lg font-medium transition-all ${(s==null?void 0:s.price)>0&&f?`${B.HIGHLIGHT_FRAME} text-white shadow-lg`:B.HIGHLIGHT_FRAME} disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx(ge,{className:"w-5 h-5"}),e.jsx("span",{children:c.text})]}),!n&&e.jsxs(M,{to:"/learn",className:"flex items-center justify-center space-x-2 px-6 py-3 rounded-lg font-medium border-2 border-gray-300 text-gray-700 hover:border-primary-yellow hover:text-primary-yellow transition-all",children:[e.jsx(v,{className:"w-5 h-5"}),e.jsx("span",{children:"Browse All Courses"})]})]}),b&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600",children:"Failed to enroll. Please try again."})}),p&&e.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-green-600 border-t-transparent"}),e.jsx("p",{className:"text-sm text-green-600",children:"‚úÖ Successfully enrolled! Refreshing page..."})]})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:(s==null?void 0:s.coverImageUrl)||ce.courses.asia.bhimbetkaRockArt,alt:s==null?void 0:s.title,className:"w-full h-80 object-cover rounded-lg shadow-lg"}),(s==null?void 0:s.price)>0&&e.jsx("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow-lg p-3",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:C(s.price)}),e.jsx("div",{className:"text-xs text-gray-500",children:"Course Price"})]})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-md",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(z,{className:"w-6 h-6 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"Course Goals"})]}),e.jsx("p",{className:"text-gray-600",children:A()})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-md",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(pe,{className:"w-6 h-6 text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"Certification"})]}),e.jsxs("p",{className:"text-gray-600",children:["Earn a certificate upon successful completion of all"," ",s==null?void 0:s.totalModule," modules"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-md",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:e.jsx(v,{className:"w-6 h-6 text-purple-600"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"Course Level"})]}),e.jsxs("p",{className:"text-gray-600",children:[k(s==null?void 0:s.courseLevel)," level course designed for comprehensive learning"]})]})]}),S&&S.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"What You'll Learn"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:S.map((i,u)=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"bg-green-100 rounded-full p-1 mt-1",children:e.jsx(T,{className:"w-4 h-4 text-green-600"})}),e.jsx("span",{className:"text-gray-700",children:i})]},u))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Complete Course Content"}),f?e.jsx("div",{className:"space-y-4",children:s.moduleCourseDetailScreenResponseDTOs.map((i,u)=>{var j,N;return e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 p-4 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-primary-yellow text-white rounded-full w-8 h-8 flex items-center justify-center text-sm font-medium",children:u+1}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:i.moduleTitle}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Module ",u+1," of ",s.totalModule]})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:"text-sm text-gray-500",children:[((j=i.subModuleCourseDetailScreenResponseDTOs)==null?void 0:j.length)||0," ","lessons"]})})]})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"space-y-3",children:(N=i.subModuleCourseDetailScreenResponseDTOs)==null?void 0:N.map((P,w)=>{var D;return e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-sm text-gray-500 w-6",children:[u+1,".",w+1]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:P.subModuleTitle}),e.jsxs("p",{className:"text-xs text-gray-600",children:[((D=P.learningContentDetailScreenResponseDTOs)==null?void 0:D.length)||0," ","learning contents"]})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:!n&&e.jsx(fe,{className:"w-4 h-4 text-gray-400"})})]},`${i.moduleId}-${w}`)})})})]},i.moduleId)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(K,{size:40,className:"text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Course Content Not Available"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"The course modules and lessons are currently being prepared. Please check back soon for the complete learning experience."}),e.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-orange-100 rounded-full text-sm text-orange-700",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full mr-2 animate-pulse"}),"Content Coming Soon"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Course Features"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{className:"w-5 h-5 text-green-600"}),e.jsxs("span",{className:"text-gray-700",children:[s==null?void 0:s.totalModule," comprehensive modules"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{className:"w-5 h-5 text-green-600"}),e.jsxs("span",{className:"text-gray-700",children:[k(s==null?void 0:s.courseLevel)," level content"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-gray-700",children:"Interactive learning experience"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-gray-700",children:"Progress tracking and analytics"})]}),(s==null?void 0:s.isPremium)&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-gray-700",children:"Premium course content"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-gray-700",children:"Certificate of completion"})]})]})]}),!n&&e.jsxs("div",{className:"bg-gradient-to-r from-primary-yellow to-orange-400 rounded-lg p-8 text-white text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Start Learning?"}),e.jsx("p",{className:"text-lg mb-6 opacity-90",children:f?`Join thousands of students and explore ${s==null?void 0:s.title}!`:`Be the first to know when ${s==null?void 0:s.title} content becomes available!`}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:f?e.jsxs(e.Fragment,{children:[e.jsx(M,{to:"/signin",className:`inline-block ${B.HIGHLIGHT_FRAME} px-8 py-3 rounded-lg font-medium  transition-colors`,children:(s==null?void 0:s.price)===0?"Get Started":`Purchase for ${C(s.price)}`}),e.jsx(M,{to:"/learn",className:"inline-block border-2 border-white text-white px-8 py-3 rounded-lg font-medium hover:bg-white hover:text-primary-yellow transition-colors",children:"Browse All Courses"})]}):e.jsx(M,{to:"/learn",className:"inline-block bg-white text-primary-yellow px-8 py-3 rounded-lg font-medium hover:bg-gray-100 transition-colors",children:"Browse Available Courses"})})]})]})}function Ie(){var m;const{courseId:d}=de(),{user:n,isAuthenticated:x}=W(),{getUserLearningProgress:r}=U(),{data:o,isLoading:t,error:a}=r(n==null?void 0:n.id,d);if(console.log("User ID:",n==null?void 0:n.id),console.log("Learning Progress Data:",o),t)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-amber-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center bg-white p-8 rounded-2xl shadow-xl max-w-md mx-4",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-yellow border-t-transparent mx-auto"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(v,{className:"h-6 w-6 text-primary-yellow"})})]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Loading Course Information"}),e.jsx("p",{className:"text-gray-600 mb-4",children:x?"Checking your enrollment status...":"Preparing course details..."}),e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-primary-yellow rounded-full animate-pulse"}),e.jsx("div",{className:"w-2 h-2 bg-primary-yellow rounded-full animate-pulse delay-75"}),e.jsx("div",{className:"w-2 h-2 bg-primary-yellow rounded-full animate-pulse delay-150"})]}),x&&n&&e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-center text-sm text-gray-500",children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:["Welcome back, ",n.name||n.email,"!"]})]})})]})});if(a)return console.error("Error fetching learning progress:",a),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-8 bg-white rounded-2xl shadow-xl max-w-md mx-4",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-6",children:"‚ö†Ô∏è"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Unable to Load Course Data"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"There was an issue checking your enrollment status. We'll show you the course as a guest."}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:e.jsx("p",{className:"text-sm text-blue-700",children:"Redirecting to guest view..."})})]})});const h=((m=o==null?void 0:o.data)==null?void 0:m.learningStatus)===1;return x&&h?e.jsx(Ce,{courseId:d,learningProgress:o==null?void 0:o.data}):e.jsx(De,{courseId:d,isAuthenticated:x})}function ze(){return e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"max-w-7xl mx-auto flex flex-col gap-6",children:e.jsx(Ie,{})})})}export{ze as default};
