import{d as X,r as h,c as V,b as Z,m as ee,j as e,T as u,B as T,ax as se,ay as te,a5 as R,g as re,L as p,G as ae}from"./index-C-krFRSx.js";import{S as le}from"./sparkles-ngj3KmDU.js";import{P as oe}from"./play-BYqmpSmX.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ie=X("circle",ne);function he(){const[c,w]=h.useState(""),[y,I]=h.useState("all"),[C,G]=h.useState({}),[b,S]=h.useState(!1),[x,f]=h.useState("home"),[$,M]=h.useState({}),P=V(),{getCurrentUser:F}=Z(),{user:j,isAuthenticated:g}=F(),{getAllCoursesQuery:O,useGetEnrolledCousreOfUser:U}=ee(),{data:v,isLoading:_,error:z}=O,{data:N,isLoading:B,error:D}=U(j==null?void 0:j.userId),k=(v==null?void 0:v.data)||[],n=((N==null?void 0:N.data)||[]).reduce((s,t)=>{if(!s.find(r=>r.courseId===t.courseId)){const r=t.modules.reduce((i,m)=>i+m.subModules.length,0),l=t.modules.reduce((i,m)=>i+m.subModules.filter(d=>d.isCompleted).length,0),o=r>0?Math.round(l/r*100):0;s.push({...t,courseCompletionPercentage:o,totalSubModules:r,completedSubModules:l})}return s},[]);h.useEffect(()=>{if(n.length>0){const s={};n.forEach(t=>{if(t.modules.length>0){const a=`${t.courseId}-${t.modules[0].moduleId}`;s[a]=!0}}),M(s)}},[n.length]);const E=k.filter(s=>y==="all"||s.regionId.toString()===y),q=n.reduce((s,t)=>{const a=t.regionName||"Other",r=t.regionName||"other";return s[r]||(s[r]={regionId:r,regionName:a,courses:[]}),s[r].courses.push(t),s},{});Object.values(q);const W=s=>{w(s.target.value)},K=s=>{s.preventDefault(),c.trim()&&P(`/learn/search?q=${encodeURIComponent(c.trim())}`)},A=(s,t)=>{G(a=>(a[s]||[]).includes(t)?{...a,[s]:[]}:{...a,[s]:[t]})},Y=(s,t)=>{const a=`${s}-${t}`;M(r=>{const l={...r};return Object.keys(l).forEach(o=>{o.startsWith(`${s}-`)&&(l[o]=!1)}),l[a]=!0,l})},J=["Roman Art","Greek","Ancient","India"],H=({message:s})=>e.jsxs("div",{className:"flex flex-col justify-center items-center py-32",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-yellow/20 rounded-full"}),e.jsx("div",{className:"absolute top-0 left-0 w-16 h-16 border-4 border-primary-yellow border-t-transparent rounded-full animate-spin"})]}),e.jsx("div",{className:"text-lg font-medium text-gray-700 mb-2",children:s}),e.jsx("div",{className:"text-sm text-gray-500",children:"Please wait a moment..."})]}),L=({message:s,onRetry:t})=>e.jsxs("div",{className:"flex flex-col justify-center items-center py-32",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-6",children:"ðŸ˜ž"}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md text-center",children:s}),e.jsx("button",{onClick:t,className:`${u.HIGHLIGHT_FRAME} px-6 py-3`,children:"Try Again"})]});return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-center mb-8 equila-bold",children:x==="home"?"Discover Courses":"My Learning Journey"}),g&&e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-1 flex",children:[e.jsxs("button",{onClick:()=>f("home"),className:`flex items-center px-6 py-3 rounded-lg font-medium transition-all duration-300 ${x==="home"?`${u.HIGHLIGHT_FRAME} shadow-md`:"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:[e.jsx(T,{size:20,className:"mr-2"}),"Home"]}),e.jsxs("button",{onClick:()=>f("learning"),className:`flex items-center px-6 py-3 rounded-lg font-medium transition-all duration-300 ${x==="learning"?`${u.HIGHLIGHT_FRAME} shadow-md`:"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:[e.jsx(se,{size:20,className:"mr-2"}),"My Learning",n.length>0&&e.jsx("span",{className:"ml-2 bg-primary-yellow text-white text-xs px-2 py-1 rounded-full",children:n.length})]})]})}),(x==="home"||!g)&&e.jsxs("div",{className:"max-w-2xl mx-auto mb-12",children:[e.jsx("form",{onSubmit:K,className:"relative mb-6",children:e.jsxs("div",{className:`relative transition-all duration-300 ${b?"transform scale-105":""}`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-yellow/20 to-orange-400/20 rounded-xl blur-lg opacity-0 group-focus-within:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:`relative bg-white rounded-xl shadow-lg border-2 transition-all duration-300 ${b?"border-primary-yellow shadow-xl shadow-yellow-200/50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"pl-4 pr-2",children:e.jsx(te,{className:`w-5 h-5 transition-colors duration-300 ${b?"text-primary-yellow":"text-gray-400"}`})}),e.jsx("input",{type:"text",placeholder:"What do you want to learn today?",className:"flex-1 py-4 px-2 text-gray-900 placeholder-gray-500 bg-transparent border-none outline-none text-lg",value:c,onChange:W,onFocus:()=>S(!0),onBlur:()=>S(!1)}),c&&e.jsx("button",{type:"button",onClick:()=>w(""),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(R,{className:"w-4 h-4"})}),e.jsx("button",{type:"submit",className:`m-2 px-6 py-2 ${u.HIGHLIGHT_FRAME} cursor-pointer transition-all duration-300 font-medium shadow-md hover:shadow-lg`,children:"Search"})]})})]})}),c?e.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 p-4 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(le,{className:"w-4 h-4 text-primary-yellow"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:['Press Enter to search for "',c,'"']})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-gray-600",children:"Enter"})," ","to search"]})]}):e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-3",children:[e.jsx(re,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Popular Searches"})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:J.map((s,t)=>e.jsx("button",{onClick:()=>P(`/learn/search?q=${encodeURIComponent(s)}`),className:"px-3 py-1.5 bg-gray-100 hover:bg-primary-yellow hover:text-white text-gray-700 text-sm rounded-full transition-all duration-300 hover:scale-105 hover:shadow-md",children:s},t))})]})})]}),(x==="home"||!g)&&e.jsxs("div",{className:"flex flex-wrap justify-center gap-4 mb-8",children:[e.jsx("button",{className:`px-6 py-3 rounded-lg font-medium transition-all duration-300 ${y==="all"?`${u.HIGHLIGHT_FRAME} shadow-lg shadow-yellow-200/50 transform scale-105`:"bg-white text-gray-700 hover:bg-gray-50 border border-gray-200 hover:border-gray-300"}`,onClick:()=>I("all"),children:"All Regions"}),k.map(s=>e.jsxs("button",{className:`px-6 py-3 rounded-lg font-medium transition-all duration-300 ${y===s.regionId.toString()?"bg-primary-yellow text-white shadow-lg shadow-yellow-200/50 transform scale-105":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-200 hover:border-gray-300"}`,onClick:()=>I(s.regionId.toString()),children:[s.regionName,e.jsxs("span",{className:"ml-2 text-xs opacity-75",children:["(",s.courses.length,")"]})]},s.regionId))]}),e.jsxs("div",{className:"min-h-[400px]",children:[(x==="home"||!g)&&e.jsx(e.Fragment,{children:_?e.jsx(H,{message:"Loading courses..."}):z?e.jsx(L,{message:"We're having trouble loading the courses. Please try again.",onRetry:()=>window.location.reload()}):e.jsxs("div",{className:"space-y-16",children:[E.map(s=>{const t=C[s.regionId]||[],a=t.length>0?s.courses.filter(r=>t.includes(r.historicalPeriodId)):s.courses;return e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[s.regionName," Art History"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[a.length," course",a.length!==1?"s":""]})]}),s.historicalPeriodDTOs.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:s.historicalPeriodDTOs.map(r=>{const l=(C[s.regionId]||[]).includes(r.historicalPeriodId);return e.jsxs("span",{className:`px-4 py-2 text-sm rounded-full cursor-pointer transition-all duration-300 flex items-center gap-2 ${l?"bg-primary-yellow text-white shadow-md transform scale-105":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,onClick:()=>A(s.regionId,r.historicalPeriodId),children:[e.jsx("span",{children:r.historicalPeriodName}),l&&e.jsx(R,{size:14,className:"hover:bg-yellow-600 rounded-full p-0.5 transition-colors",onClick:o=>{o.stopPropagation(),A(s.regionId,r.historicalPeriodId)}})]},r.historicalPeriodId)})}),a.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-6",children:a.map(r=>e.jsx(p,{to:`/learn/course/${r.courseId}`,className:"group relative block",children:e.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-md transition-all duration-300 transform origin-center group-hover:scale-110 group-hover:shadow-2xl group-hover:z-50 relative",children:[e.jsx("div",{className:"h-48 overflow-hidden",children:e.jsx("img",{loading:"lazy",src:r.thumbnailImageUrl,alt:r.title,className:"w-full h-full object-cover transition-transform duration-300"})}),e.jsxs("div",{className:"py-6 px-4 bg-[#f8e7ce] relative",children:[e.jsx("h3",{className:"font-medium text-lg transition-all duration-300 truncate group-hover:opacity-0",children:r.title}),e.jsxs("div",{className:"absolute inset-0 bg-[#f8e7ce] p-4 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 rounded-b-lg flex flex-col justify-start",children:[e.jsx("h3",{className:"font-medium text-lg mb-2 whitespace-normal overflow-visible text-wrap",children:r.title}),r.description&&e.jsx("p",{className:"text-sm text-gray-600",children:r.description})]})]})]})},r.courseId))}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:t.length>0?"No courses available for the selected period in this region.":"No courses available in this region yet."})]},s.regionId)}),E.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-gray-500 text-lg",children:"No courses found matching your criteria."}),c&&e.jsxs(p,{to:`/learn/search?q=${encodeURIComponent(c)}`,className:"inline-block mt-4 px-6 py-3 bg-primary-yellow text-white rounded-lg hover:bg-yellow-600 transition-colors",children:['Search All Courses for "',c,'"']})]})]})}),g&&x==="learning"&&e.jsx(e.Fragment,{children:B?e.jsx(H,{message:"Loading your learning progress..."}):D?e.jsx(L,{message:"We're having trouble loading your enrolled courses. Please try again.",onRetry:()=>window.location.reload()}):n.length>0?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Your Learning Progress"}),e.jsxs("p",{className:"text-gray-600",children:["You are enrolled in ",n.length," course",n.length!==1?"s":""]})]}),n.map(s=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"flex items-start p-6 bg-gradient-to-r from-amber-50 to-yellow-50",children:[e.jsx("div",{className:"flex-shrink-0 mr-6",children:e.jsx("img",{src:s.thumbnailUrl,alt:s.courseTitle,className:"w-24 h-24 rounded-lg object-cover shadow-md"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(p,{to:`/learn/course/${s.courseId}`,className:"text-xl font-bold text-gray-900 hover:text-primary-yellow mb-2",children:s.courseTitle}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:s.courseDescription}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:[s.completedSubModules," of"," ",s.totalSubModules," lessons completed"]}),e.jsxs("div",{className:"text-sm font-medium text-green-600",children:[s.courseCompletionPercentage,"% Complete"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-3",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${s.courseCompletionPercentage}%`}})})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center space-x-4 mb-6 overflow-x-auto pb-2",children:s.modules.map((t,a)=>{const r=`${s.courseId}-${t.moduleId}`,l=$[r],o=t.subModules.filter(d=>d.isCompleted).length,i=t.subModules.length,m=o===i&&i>0;return e.jsx("button",{onClick:()=>Y(s.courseId,t.moduleId),className:`flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center text-sm font-bold transition-all duration-200 ${m?"bg-green-500 text-white shadow-md":l?"border-2 border-primary-yellow text-primary-yellow bg-white":"border-2 border-gray-300 text-gray-600 hover:border-primary-yellow hover:text-primary-yellow bg-white"}`,children:a+1},t.moduleId)})}),s.modules.map((t,a)=>{const r=`${s.courseId}-${t.moduleId}`,l=$[r],o=t.subModules.filter(d=>d.isCompleted).length,i=t.subModules.length,m=i>0?o/i*100:0;return l?e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900 text-lg",children:["Module ",a+1]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[o," of ",i," ","lessons completed"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-600",children:[Math.round(m),"%"]}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-yellow h-2 rounded-full transition-all duration-300",style:{width:`${m}%`}})})]})]}),e.jsx("div",{className:"space-y-2",children:t.subModules.map((d,Q)=>e.jsxs(p,{to:`/learn/course/${s.courseId}/module/${t.moduleId}/submodule/${d.subModuleId}`,className:"flex items-center p-3 bg-white rounded-lg hover:bg-gray-100 transition-colors duration-200 group border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[e.jsx("div",{className:"flex-shrink-0",children:d.isCompleted?e.jsx(ae,{className:"w-5 h-5 text-green-500"}):e.jsx(ie,{className:"w-5 h-5 text-gray-400"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("h5",{className:"text-sm font-medium text-gray-900 group-hover:text-primary-yellow transition-colors",children:["Lesson ",Q+1]})})]}),e.jsxs("div",{className:"flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(oe,{className:"w-4 h-4 text-primary-yellow"}),e.jsx("span",{className:"text-sm text-primary-yellow font-medium",children:d.isCompleted?"Review":"Start"})]})]},d.subModuleId))})]},t.moduleId):null})]})]},s.courseId))]}):e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-3xl p-12 max-w-md mx-auto",children:[e.jsx(T,{size:64,className:"mx-auto text-gray-400 mb-6"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No Enrolled Courses Yet"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Start your learning journey by enrolling in a course from our catalog."}),e.jsx("button",{onClick:()=>f("home"),className:`${u.HIGHLIGHT_FRAME} px-8 py-3`,children:"Browse Courses"})]})})})]})]})}export{he as default};
