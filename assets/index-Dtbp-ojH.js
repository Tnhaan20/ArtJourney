import{a as g,j as e,k as x,U as p,S as b,N as f,b as v,r as w}from"./index-DswT0pIj.js";import{C as u}from"./crown-BWVcOKdq.js";import{u as y}from"./use-leaderboard-Ck5O9rPh.js";function k({user:t,currentUserRank:l,totalPlayers:s,loading:o}){var n;const{t:a}=g();return e.jsxs("div",{className:"relative bg-gradient-to-r from-orange-400 to-amber-400 rounded-2xl p-8 mb-8 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -translate-y-32 translate-x-32"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-white/10 rounded-full translate-y-24 -translate-x-24"}),e.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-white p-1",children:e.jsx("img",{src:(t==null?void 0:t.avatar)||"/api/placeholder/80/80",alt:(t==null?void 0:t.name)||"User",className:"w-full h-full rounded-full object-cover"})}),e.jsxs("div",{className:"text-white",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:(t==null?void 0:t.name)||a("ranking.defaultUser","Art Journey Student")}),e.jsx("p",{className:"text-white/90 text-lg",children:a("ranking.subtitle","Global Leaderboard Champion")}),l&&e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx(u,{className:"w-5 h-5 text-yellow-300"}),e.jsxs("span",{className:"text-white/90",children:[a("ranking.currentRank","Current Rank"),": #",l.rank]})]})]})]}),e.jsxs("div",{className:"flex space-x-6 text-white",children:[e.jsxs("div",{className:"text-center bg-white/20 backdrop-blur-sm rounded-xl p-4 min-w-[120px]",children:[e.jsxs("div",{className:"flex items-center justify-center mb-1",children:[e.jsx(x,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-sm opacity-90",children:a("ranking.totalScore","Total Score")})]}),e.jsx("div",{className:"text-2xl font-bold",children:o?e.jsx("div",{className:"w-12 h-8 bg-white/20 rounded animate-pulse"}):((n=l==null?void 0:l.totalScore)==null?void 0:n.toLocaleString())||"0"})]}),e.jsxs("div",{className:"text-center bg-white/20 backdrop-blur-sm rounded-xl p-4 min-w-[120px]",children:[e.jsxs("div",{className:"flex items-center justify-center mb-1",children:[e.jsx(x,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-sm opacity-90",children:a("ranking.challengesCompleted","Challenges")})]}),e.jsx("div",{className:"text-2xl font-bold",children:o?e.jsx("div",{className:"w-12 h-8 bg-white/20 rounded animate-pulse"}):(l==null?void 0:l.challengesCompleted)||0})]}),e.jsxs("div",{className:"text-center bg-white/20 backdrop-blur-sm rounded-xl p-4 min-w-[120px]",children:[e.jsxs("div",{className:"flex items-center justify-center mb-1",children:[e.jsx(p,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-sm opacity-90",children:a("ranking.totalPlayers","Total Players")})]}),e.jsx("div",{className:"text-2xl font-bold",children:o?e.jsx("div",{className:"w-12 h-8 bg-white/20 rounded animate-pulse"}):(s==null?void 0:s.toLocaleString())||"0"})]})]})]})]})}function C({activeTab:t,setActiveTab:l}){const{t:s}=g(),o=[{id:"allTime",label:s("ranking.tabs.allTime","All Time Global"),description:s("ranking.tabs.allTimeDesc","Overall performance across all challenges")}];return e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl p-2 shadow-2xl border border-gray-200/60",children:[e.jsxs("div",{className:"text-center mb-4 px-6 pt-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:s("ranking.tabs.title","Global Leaderboard")}),e.jsx("p",{className:"text-gray-600",children:s("ranking.tabs.subtitle","Compete with players worldwide")})]}),e.jsx("div",{className:"flex justify-center",children:o.map(a=>e.jsxs("button",{onClick:()=>l(a.id),className:`group relative overflow-hidden rounded-2xl px-8 py-4 font-semibold transition-all duration-500 transform hover:scale-105 ${t===a.id?"bg-gradient-to-r from-orange-400 to-amber-400 text-white shadow-xl ring-4 ring-orange-200 ring-opacity-50":"text-gray-700 hover:text-orange-600 hover:bg-orange-50"}`,children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-transparent via-white/20 to-transparent"}),e.jsx("div",{className:"absolute -top-4 -right-4 w-24 h-24 bg-gradient-to-br from-white/30 to-transparent rounded-full blur-xl"})]}),e.jsxs("div",{className:"relative z-10 text-center",children:[e.jsx("div",{className:"font-bold text-lg mb-1",children:a.label}),e.jsx("div",{className:`text-xs ${t===a.id?"text-white/90":"text-gray-500"}`,children:a.description})]}),t===a.id&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-white/50 via-white to-white/50 rounded-full"})]},a.id))})]})})}function T({users:t,loading:l,startRank:s=4,currentUser:o}){const{t:a}=g();return l?e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl border border-gray-200/60 overflow-hidden",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(x,{className:"w-6 h-6 text-amber-500 mr-3"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:a("ranking.leaderboard","Global Leaderboard")})]}),e.jsx("div",{className:"space-y-4",children:[...Array(8)].map((n,c)=>e.jsxs("div",{className:"flex items-center space-x-6 p-6 animate-pulse bg-gray-50 rounded-2xl",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-300 rounded-full"}),e.jsx("div",{className:"w-12 h-12 bg-gray-300 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-5 bg-gray-300 rounded w-1/3 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/4"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded w-20"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-16"})]})]},c))})]})}):!t||t.length===0?e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl border border-gray-200/60 overflow-hidden",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(x,{className:"w-20 h-20 text-gray-400 mx-auto mb-6"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-700 mb-4",children:a("ranking.noData","No Rankings Available")}),e.jsx("p",{className:"text-gray-600 text-lg",children:a("ranking.noDataDesc","Be the first to complete challenges and appear on the leaderboard!")})]})}):e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl border border-gray-200/60 overflow-hidden",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{className:"w-6 h-6 text-amber-500 mr-3"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:a("ranking.leaderboard","Global Leaderboard")})]}),e.jsxs("div",{className:"text-gray-600",children:[a("ranking.showingRanks","Showing ranks")," ",s,"-",s+t.length-1]})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-6 text-sm font-bold text-gray-700 bg-gradient-to-r from-amber-50 to-orange-50 rounded-2xl p-6 mb-6 border border-amber-200/50",children:[e.jsxs("div",{className:"col-span-1 flex items-center",children:[e.jsx(b,{className:"w-4 h-4 mr-2 text-amber-500"}),a("ranking.table.rank","Rank")]}),e.jsxs("div",{className:"col-span-5 flex items-center",children:[e.jsx(f,{className:"w-4 h-4 mr-2 text-amber-500"}),a("ranking.table.player","Player")]}),e.jsxs("div",{className:"col-span-3 text-center flex items-center justify-center",children:[e.jsx(x,{className:"w-4 h-4 mr-2 text-amber-500"}),a("ranking.table.totalScore","Total Score")]}),e.jsxs("div",{className:"col-span-3 text-center flex items-center justify-center",children:[e.jsx(b,{className:"w-4 h-4 mr-2 text-amber-500"}),a("ranking.table.challengesCompleted","Challenges Completed")]})]}),e.jsx("div",{className:"space-y-3",children:t.map((n,c)=>{var m;return e.jsxs("div",{className:`grid grid-cols-12 gap-6 items-center p-6 rounded-2xl transition-all duration-300 hover:shadow-lg transform hover:scale-[1.02] ${n.isCurrentUser?"bg-gradient-to-r from-orange-50 to-amber-50 border-2 border-orange-200 shadow-lg":"bg-gradient-to-r from-gray-50 to-white hover:from-amber-50 hover:to-orange-50 border border-gray-200 hover:border-amber-200"}`,children:[e.jsx("div",{className:"col-span-1",children:e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg ${n.isCurrentUser?"bg-gradient-to-r from-orange-400 to-amber-400 text-white":"bg-gradient-to-r from-gray-200 to-gray-300 text-gray-700"}`,children:s+c})}),e.jsxs("div",{className:"col-span-5 flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:n.avatar||"/api/placeholder/50/50",alt:n.name,className:"w-14 h-14 rounded-full object-cover border-2 border-white shadow-lg"}),n.isCurrentUser&&e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-orange-400 rounded-full flex items-center justify-center",children:e.jsx(b,{className:"w-3 h-3 text-white"})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 text-lg",children:[n.name||n.username,n.isCurrentUser&&e.jsx("span",{className:"ml-3 text-sm bg-gradient-to-r from-orange-400 to-amber-400 text-white px-3 py-1 rounded-full",children:a("ranking.you","You")})]}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[a("ranking.table.playerId","Player ID"),": ",n.userId]})]})]}),e.jsx("div",{className:"col-span-3 text-center",children:e.jsxs("div",{className:"bg-gradient-to-r from-amber-100 to-orange-100 rounded-xl px-4 py-3",children:[e.jsx("div",{className:"font-bold text-xl text-amber-700",children:((m=n.totalScore)==null?void 0:m.toLocaleString())||"0"}),e.jsx("div",{className:"text-xs text-amber-600 mt-1",children:a("ranking.table.points","points")})]})}),e.jsx("div",{className:"col-span-3 text-center",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-100 to-indigo-100 rounded-xl px-4 py-3",children:[e.jsx("div",{className:"font-bold text-xl text-blue-700",children:n.challengesCompleted||0}),e.jsx("div",{className:"text-xs text-blue-600 mt-1",children:a("ranking.table.challenges","challenges")})]})})]},n.id)})}),t.length>=10&&e.jsx("div",{className:"text-center mt-8",children:e.jsx("button",{className:"bg-gradient-to-r from-orange-400 to-amber-400 text-white px-8 py-3 rounded-2xl font-semibold hover:from-orange-500 hover:to-amber-500 transition-all duration-300 transform hover:scale-105",children:a("ranking.loadMore","Load More Players")})})]})})}function S({topThree:t,loading:l}){const{t:s}=g();if(l)return e.jsx("div",{className:"flex justify-center items-end space-x-8 mb-16",children:[2,1,3].map(r=>e.jsxs("div",{className:"text-center animate-pulse",children:[e.jsx("div",{className:"w-32 h-32 bg-gray-300 rounded-full mx-auto mb-6"}),e.jsx("div",{className:"h-6 bg-gray-300 rounded w-28 mx-auto mb-4"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-20 mx-auto mb-4"}),e.jsx("div",{className:`w-40 bg-gray-300 rounded-t-3xl ${r===1?"h-40":r===2?"h-32":"h-24"}`})]},r))});if(!t||t.length===0)return e.jsxs("div",{className:"text-center py-16 mb-16",children:[e.jsx(x,{className:"w-20 h-20 text-gray-400 mx-auto mb-6"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-700 mb-4",children:s("ranking.noTopPlayers","No Top Players Yet")}),e.jsx("p",{className:"text-gray-600 text-lg",children:s("ranking.noTopPlayersDesc","Complete challenges to appear on the podium!")})]});const o=r=>{switch(r){case 1:return"h-40";case 2:return"h-32";case 3:return"h-24";default:return"h-24"}},a=r=>{switch(r){case 1:return"bg-gradient-to-t from-yellow-400 via-yellow-300 to-yellow-200";case 2:return"bg-gradient-to-t from-gray-400 via-gray-300 to-gray-200";case 3:return"bg-gradient-to-t from-orange-400 via-orange-300 to-orange-200";default:return"bg-gray-300"}},n=r=>{switch(r){case 1:return"ring-4 ring-yellow-300 ring-opacity-50";case 2:return"ring-4 ring-gray-300 ring-opacity-50";case 3:return"ring-4 ring-orange-300 ring-opacity-50";default:return""}},c=r=>{switch(r){case 1:return"border-yellow-400";case 2:return"border-gray-400";case 3:return"border-orange-400";default:return"border-gray-300"}},m=[...t];for(;m.length<3;)m.push(null);const N=[m[1],m[0],m[2]],h=[2,1,3];return e.jsxs("div",{className:"mb-16",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx(u,{className:"w-8 h-8 text-yellow-500 mr-3"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:s("ranking.topThree","Top 3 Champions")}),e.jsx(u,{className:"w-8 h-8 text-yellow-500 ml-3"})]}),e.jsx("p",{className:"text-gray-600 text-lg",children:s("ranking.topThreeDesc","The ultimate challenge masters")})]}),e.jsx("div",{className:"flex justify-center items-end space-x-8",children:N.map((r,j)=>{var d;const i=h[j];return r?e.jsxs("div",{className:"text-center",children:[i===1&&e.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:"ðŸ‘‘"}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("img",{src:r.avatar||"/api/placeholder/120/120",alt:r.name||r.username,className:`w-32 h-32 rounded-full object-cover border-4 ${c(i)} shadow-2xl mx-auto ${n(i)}`}),e.jsx("div",{className:`absolute -top-3 -right-3 w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-lg ${i===1?"bg-gradient-to-r from-yellow-400 to-yellow-500":i===2?"bg-gradient-to-r from-gray-400 to-gray-500":"bg-gradient-to-r from-orange-400 to-orange-500"}`,children:i}),r.isCurrentUser&&e.jsx("div",{className:"absolute -top-3 -left-3 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(b,{className:"w-4 h-4 text-white"})})]}),e.jsxs("h3",{className:"font-bold text-gray-800 mb-2 text-lg max-w-[160px] truncate",children:[r.name||r.username,r.isCurrentUser&&e.jsx("span",{className:"block text-sm text-blue-600 mt-1",children:s("ranking.you","You")})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-800 mb-1",children:((d=r.totalScore)==null?void 0:d.toLocaleString())||"0"}),e.jsx("p",{className:"text-sm text-gray-600",children:s("ranking.totalPoints","Total Points")})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:"text-lg font-semibold text-gray-700",children:[r.challengesCompleted||0," ",s("ranking.challenges","challenges")]})}),e.jsx("div",{className:`w-40 ${o(i)} ${a(i)} rounded-t-3xl flex items-center justify-center text-white font-bold shadow-2xl border-t-4 ${c(i)}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl font-bold mb-2",children:i}),e.jsx("div",{className:"text-sm opacity-90",children:i===1?s("ranking.first","FIRST"):i===2?s("ranking.second","SECOND"):s("ranking.third","THIRD")})]})})]},r.id):e.jsxs("div",{className:"text-center opacity-50",children:[e.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-200 border-4 border-gray-300 mx-auto mb-6 flex items-center justify-center",children:e.jsx(x,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"font-bold text-gray-400 mb-2 text-lg",children:s("ranking.emptySlot","Available")}),e.jsx("p",{className:"text-gray-400 mb-6",children:s("ranking.emptySlotDesc","Compete to claim this spot!")}),e.jsx("div",{className:`w-40 ${o(i)} bg-gray-200 rounded-t-3xl flex items-center justify-center shadow-lg`,children:e.jsx("span",{className:"text-4xl font-bold text-gray-400",children:i})})]},`empty-${i}`)})})]})}function P(){const{t}=g(),{user:l}=v(),{getGlobalLeaderboard:s}=y(),[o,a]=w.useState("allTime"),{data:n,isLoading:c,error:m}=s(),h=((n==null?void 0:n.leaderboard)||[]).map(d=>({id:d.userId,userId:d.userId,name:d.username,username:d.username,avatar:d.avatarUrl||"",score:d.totalScore,totalScore:d.totalScore,completedChallenges:d.challengesCompleted,challengesCompleted:d.challengesCompleted,rank:d.rank,isCurrentUser:d.userId===(l==null?void 0:l.id)})),r=h.find(d=>d.userId===(l==null?void 0:l.id)),j=h.slice(0,3),i=h.slice(3);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(k,{user:l,currentUserRank:r,totalPlayers:h.length,loading:c}),e.jsx(C,{activeTab:o,setActiveTab:a}),m&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6 mb-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:t("ranking.error.title","Unable to load leaderboard")}),e.jsx("p",{className:"text-red-600",children:t("ranking.error.message","Please try again later.")})]})}),e.jsx(S,{topThree:j,loading:c}),e.jsx(T,{users:i,loading:c,startRank:4,currentUser:l})]})})}export{P as default};
